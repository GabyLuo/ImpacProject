webpackJsonp([15],{"+cKO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"alpha",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"alphaNum",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"numeric",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"between",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"email",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ipAddress",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"macAddress",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"maxLength",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minLength",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"required",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"requiredIf",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"requiredUnless",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"sameAs",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"url",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"or",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"and",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"not",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"minValue",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"maxValue",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"integer",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"decimal",{enumerable:!0,get:function(){return q.default}}),t.helpers=void 0;var o=k(n("FWhV")),r=k(n("PKmV")),i=k(n("hbkP")),s=k(n("3Ro/")),a=k(n("6rz0")),l=k(n("HSVw")),c=k(n("HM/u")),d=k(n("qHXR")),f=k(n("4ypF")),u=k(n("4oDf")),p=k(n("lEk1")),m=k(n("6+Xr")),v=k(n("L6Jx")),h=k(n("7J6f")),g=k(n("Y18q")),_=k(n("bXE/")),b=k(n("FP1U")),y=k(n("aYrh")),w=k(n("xJ3U")),C=k(n("eqrJ")),q=k(n("pO+f")),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}(n("URu4"));function k(e){return e&&e.__esModule?e:{default:e}}t.helpers=x},"0rJ7":function(e,t,n){var o=n("yY4t");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("rjj0").default)("5eb27110",o,!1,{})},"3Ro/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e,t){return(0,o.withParams)({type:"between",min:e,max:t},function(n){return!(0,o.req)(n)||(!/\s/.test(n)||n instanceof Date)&&+e<=+n&&+t>=+n})}},"4oDf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4"),r=(0,o.withParams)({type:"required"},o.req);t.default=r},"4ypF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"minLength",min:e},function(t){return!(0,o.req)(t)||(0,o.len)(t)>=e})}},"6+Xr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"requiredUnless",prop:e},function(t,n){return!!(0,o.ref)(e,this,n)||(0,o.req)(t)})}},"6rz0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("URu4").regex)("email",/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/);t.default=o},"7J6f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("URu4").regex)("url",/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);t.default=o},"9VIl":function(e,t,n){var o;o=function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=9)}([function(e,t,n){"use strict";t.a={prefix:"",suffix:"",thousands:",",decimal:".",precision:2}},function(e,t,n){"use strict";var o=n(2),r=n(5),i=n(0);t.a=function(e,t){if(t.value){var s=n.i(r.a)(i.a,t.value);if("INPUT"!==e.tagName.toLocaleUpperCase()){var a=e.getElementsByTagName("input");1!==a.length||(e=a[0])}e.oninput=function(){var t=e.value.length-e.selectionEnd;e.value=n.i(o.a)(e.value,s),t=Math.max(t,s.suffix.length),t=e.value.length-t,t=Math.max(t,s.prefix.length+1),n.i(o.b)(e,t),e.dispatchEvent(n.i(o.c)("change"))},e.onfocus=function(){n.i(o.b)(e,e.value.length-s.suffix.length)},e.oninput(),e.dispatchEvent(n.i(o.c)("input"))}}},function(e,t,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a;"number"==typeof e&&(e=e.toFixed(s(t.precision)));var n=e.indexOf("-")>=0?"-":"",o=l(a(i(e),t.precision)).split("."),r=o[0],c=o[1];return r=function(e,t){return e.replace(/(\d)(?=(?:\d{3})+\b)/gm,"$1"+t)}(r,t.thousands),t.prefix+n+function(e,t,n){return t?e+n+t:e}(r,c,t.decimal)+t.suffix}function r(e,t){var n=e.indexOf("-")>=0?-1:1,o=a(i(e),t);return parseFloat(o)*n}function i(e){return l(e).replace(/\D+/g,"")||"0"}function s(e){return function(e,t,n){return Math.max(e,Math.min(t,n))}(0,e,20)}function a(e,t){var n=Math.pow(10,t);return(parseFloat(e)/n).toFixed(s(t))}function l(e){return e?e.toString():""}function c(e,t){var n=function(){e.setSelectionRange(t,t)};e===document.activeElement&&(n(),setTimeout(n,1))}function d(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var f=n(0);n.d(t,"a",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return d})},function(e,t,n){"use strict";function o(e,t){t&&Object.keys(t).map(function(e){a.a[e]=t[e]}),e.directive("money",s.a),e.component("money",i.a)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n.n(r),s=n(1),a=n(0);n.d(t,"Money",function(){return i.a}),n.d(t,"VMoney",function(){return s.a}),n.d(t,"options",function(){return a.a}),n.d(t,"VERSION",function(){return l});var l="0.8.1";t.default=o,"undefined"!=typeof window&&window.Vue&&window.Vue.use(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(0),i=n(2);t.default={name:"Money",props:{value:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:function(){return r.a.precision}},decimal:{type:String,default:function(){return r.a.decimal}},thousands:{type:String,default:function(){return r.a.thousands}},prefix:{type:String,default:function(){return r.a.prefix}},suffix:{type:String,default:function(){return r.a.suffix}}},directives:{money:o.a},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(e,t){var o=n.i(i.a)(e,this.$props);o!==this.formattedValue&&(this.formattedValue=o)}}},methods:{change:function(e){this.$emit("input",this.masked?e.target.value:n.i(i.d)(e.target.value,this.precision))}}}},function(e,t,n){"use strict";t.a=function(e,t){return e=e||{},t=t||{},Object.keys(e).concat(Object.keys(t)).reduce(function(n,o){return n[o]=void 0===t[o]?e[o]:t[o],n},{})}},function(e,t,n){var o=n(7)(n(4),n(8),null,null);e.exports=o.exports},function(e,t){e.exports=function(e,t,n,o){var r,i=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(r=e,i=e.default);var a="function"==typeof i?i.options:i;if(t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),n&&(a._scopeId=n),o){var l=a.computed||(a.computed={});Object.keys(o).forEach(function(e){var t=o[e];l[e]=function(){return t}})}return{esModule:r,exports:i,options:a}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"money",rawName:"v-money",value:{precision:e.precision,decimal:e.decimal,thousands:e.thousands,prefix:e.prefix,suffix:e.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-money",attrs:{type:"tel"},domProps:{value:e.formattedValue},on:{change:e.change}})},staticRenderFns:[]}},function(e,t,n){e.exports=n(3)}])},e.exports=o()},"9kIL":function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},FP1U:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"not"},function(t,n){return!(0,o.req)(t)||!e.call(this,t,n)})}},FWhV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("URu4").regex)("alpha",/^[a-zA-Z]*$/);t.default=o},"HM/u":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,o.withParams)({type:"macAddress"},function(t){if(!(0,o.req)(t))return!0;if("string"!=typeof t)return!1;var n="string"==typeof e&&""!==e?t.split(e):12===t.length||16===t.length?t.match(/.{2}/g):null;return null!==n&&(6===n.length||8===n.length)&&n.every(r)})};var r=function(e){return e.toLowerCase().match(/^[0-9a-f]{2}$/)}},HSVw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4"),r=(0,o.withParams)({type:"ipAddress"},function(e){if(!(0,o.req)(e))return!0;if("string"!=typeof e)return!1;var t=e.split(".");return 4===t.length&&t.every(i)});t.default=r;var i=function(e){if(e.length>3||0===e.length)return!1;if("0"===e[0]&&"0"!==e)return!1;if(!e.match(/^\d+$/))return!1;var t=0|+e;return t>=0&&t<=255}},L6Jx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"sameAs",eq:e},function(t,n){return t===(0,o.ref)(e,this,n)})}},PKmV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("URu4").regex)("alphaNum",/^[a-zA-Z0-9]*$/);t.default=o},SldL:function(e,t){!function(t){"use strict";var n,o=Object.prototype,r=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag",c="object"==typeof e,d=t.regeneratorRuntime;if(d)c&&(e.exports=d);else{(d=t.regeneratorRuntime=c?e.exports:{}).wrap=y;var f="suspendedStart",u="suspendedYield",p="executing",m="completed",v={},h={};h[s]=function(){return this};var g=Object.getPrototypeOf,_=g&&g(g(M([])));_&&_!==o&&r.call(_,s)&&(h=_);var b=x.prototype=C.prototype=Object.create(h);q.prototype=b.constructor=x,x.constructor=q,x[l]=q.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===q||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(b),e},d.awrap=function(e){return{__await:e}},k(O.prototype),O.prototype[a]=function(){return this},d.AsyncIterator=O,d.async=function(e,t,n,o){var r=new O(y(e,t,n,o));return d.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},k(b),b[l]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},d.values=M,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,r){return a.type="throw",a.arg=e,t.next=o,r&&(t.method="next",t.arg=n),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:M(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=n),v}}}function y(e,t,n,o){var r=t&&t.prototype instanceof C?t:C,i=Object.create(r.prototype),s=new S(o||[]);return i._invoke=function(e,t,n){var o=f;return function(r,i){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===r)throw i;return U()}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var a=$(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=w(e,t,n);if("normal"===l.type){if(o=n.done?m:u,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}(e,n,s),i}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function C(){}function q(){}function x(){}function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,s){var a=w(e[n],e,o);if("throw"!==a.type){var l=a.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,s)},function(e){t("throw",e,i,s)}):Promise.resolve(c).then(function(e){l.value=e,i(l)},s)}s(a.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function $(e,t){var o=e.iterator[t.method];if(o===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,$(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=w(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:U}}function U(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},UHJ3:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},URu4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"withParams",{enumerable:!0,get:function(){return r.default}}),t.regex=t.ref=t.len=t.req=void 0;var o,r=(o=n("mpcv"))&&o.__esModule?o:{default:o};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(e){if(Array.isArray(e))return!!e.length;if(void 0===e||null===e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===i(e)){for(var t in e)return!0;return!1}return!!String(e).length};t.req=s;t.len=function(e){return Array.isArray(e)?e.length:"object"===i(e)?Object.keys(e).length:String(e).length};t.ref=function(e,t,n){return"function"==typeof e?e.call(t,n):n[e]};t.regex=function(e,t){return(0,r.default)({type:e},function(e){return!s(e)||t.test(e)})}},Xxa5:function(e,t,n){e.exports=n("jyFz")},Y18q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.withParams)({type:"or"},function(){for(var e=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.length>0&&t.reduce(function(t,n){return t||n.apply(e,o)},!1)})}},Z57k:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),r=n.n(o),i=n("exGp"),s=n.n(i),a=n("Dd8w"),l=n.n(a),c=n("NYxO"),d=n("+cKO"),f=n("PJh5"),u=n.n(f),p=n("mtWM"),m=n.n(p),v={name:"Recepciones",props:{compra_id:{type:Number}},beforeRouteEnter:function(e,t,n){n(function(e){for(var o=!1,r=e.$store.getters["user/role"],i=0;i<r.length;i++)r[i].toUpperCase()!=="admin".toUpperCase()&&r[i].toUpperCase()!=="ROOT".toUpperCase()&&r[i].toUpperCase()!=="CLIENTE".toUpperCase()&&r[i].toUpperCase()!=="LIDER".toUpperCase()&&r[i].toUpperCase()!=="COORDINADOR".toUpperCase()&&r[i].toUpperCase()!=="GERENTE DE OPERACIONES".toUpperCase()&&r[i].toUpperCase()!=="PMO".toUpperCase()&&r[i].toUpperCase()!=="FINANZAS".toUpperCase()&&r[i].toUpperCase()!=="OPERACIÓN".toUpperCase()&&r[i].toUpperCase()!=="LICITACIONES".toUpperCase()&&r[i].toUpperCase()!=="LICITACIONES - SOLICITUDES".toUpperCase()&&r[i].toUpperCase()!=="INVENTARIOS".toUpperCase()&&r[i].toUpperCase()!=="GERENTE".toUpperCase()&&r[i].toUpperCase()!=="AUXILIAR".toUpperCase()&&r[i].toUpperCase()!=="VENTAS".toUpperCase()&&r[i].toUpperCase()!=="COMPRAS".toUpperCase()||(o=!0);o?n():n("/"===t.path?"/dashboard":t.path)})},data:function(){return{productosOptions:[{label:"---Seleccione---",value:0}],tab:"detalles",loadingButton:!1,views:{grid:!0,create:!1,update:!1},form:{fields:{id:0,folio:"",fecha:"",user_id:"",status:0},columns:[{name:"folio",label:"Folio",field:"folio",sortable:!0,type:"string",align:"center"},{name:"fecha_recepcion",label:"Fecha",field:"fecha_recepcion",sortable:!0,type:"string",align:"center"},{name:"name_user",label:"Usuario",field:"name_user",sortable:!0,type:"string",align:"left"},{name:"status",label:"Status",field:"status",sortable:!0,type:"string",align:"left"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],data:[],rowsOptions:[3,5,7,10,15,20,25,50],pagination:{rowsPerPage:50},selected:[],filter:"",loading:!1},form_detalles:{data:[],editar:!1,fields:{id:0,producto_id:0,presentacion_id:0,cantidad:0,costo:0,recepcion_id:0},columns:[{name:"producto",label:"Producto",field:"producto",sortable:!0,type:"string",align:"left"},{name:"cantidad",label:"Cantidad",field:"cantidad",sortable:!0,type:"string",align:"right"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],rowsOptions:[3,5,7,10,15,20,25,50],pagination:{rowsPerPage:50},selected:[],filter:"",loading:!1},modal:{x:0,y:0,transition:null}}},computed:l()({},Object(c.c)({}),{usersOptions:function(){var e=this.$store.getters["sys/users/selectOptionsName"];return e.push({label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e},presentacionesOptions:function(){var e=this.$store.getters["inv/tipos_presentaciones/selectOptions"];return e.push({label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e}}),created:function(){this.loadAll()},methods:l()({},Object(c.b)({getRecepciones:"cmp/recepciones/getByCompra",saveRecepciones:"cmp/recepciones/save",updateRecepciones:"cmp/recepciones/update",deleteRecepciones:"cmp/recepciones/delete",getUsers:"sys/users/refresh",getFolioConsecutivo:"cmp/recepciones/getFolioConsecutivo",getProductos:"inv/productos/getByCompra",getPresentaciones:"inv/tipos_presentaciones/refresh",getDetalles:"cmp/recepciones_detalles/getByRecepcion",saveDetalles:"cmp/recepciones_detalles/save",updateDetalles:"cmp/recepciones_detalles/update",deleteDetalles:"cmp/recepciones_detalles/delete"}),{loadAll:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.loading=!0,t.next=3,e.getRecepcionesByCompra();case 3:return t.next=5,e.getUsers();case 5:return t.next=7,e.cargaProductos();case 7:return t.next=9,e.getPresentaciones();case 9:e.form.loading=!1;case 10:case"end":return t.stop()}},t,e)}))()},getRecepcionesByCompra:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.data=[],t.next=3,m.a.get("/recepciones/getByCompra/"+e.compra_id).then(function(t){var n=t.data;e.form.data=n.recepciones}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},setView:function(e){this.views.grid=!1,this.views.create=!1,this.views.update=!1,this.views[e]=!0},getFolioNuevo:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.fields.folio="",t.next=3,e.getFolioConsecutivo().then(function(t){var n=t.data;"success"===n.result&&(e.form.fields.folio=n.folio)}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},isNumber:function(e,t){switch(t){case"cantidad":this.form_detalles.fields.cantidad=this.form_detalles.fields.cantidad.replace(/[^0-9.]/g,""),this.$v.form_detalles.fields.cantidad.$touch();break;case"costo":this.form_detalles.fields.costo=this.form_detalles.fields.costo.replace(/[^0-9.]/g,""),this.$v.form_detalles.fields.costo.$touch()}},save:function(){var e=this;if(this.$v.form.$touch(),this.$v.form.$error)this.$showMessage("¡Advertencia!","Por favor revise los campos.");else{this.loadingButton=!0,this.form.fields.fecha=u()(String(this.form.fields.fecha)).utcOffset("-04:00:00",!1).format("YYYY-MM-DD HH:mm:ss");var t=this.form.fields;t.compra_id=this.compra_id,this.saveRecepciones(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.form.fields.id=n.id,e.form_detalles.fields.recepcion_id=n.id,e.limpiarDetalles(),e.getDetallesByMovimiento(),e.setView("update")):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})}},update:function(){var e=this;if(this.$v.form.$touch(),this.$v.form.$error)this.$showMessage("Error","Por favor revise los campos.");else{this.loadingButton=!0;var t=this.form.fields;this.updateRecepciones(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}):e.$showMessage(n.message.title,n.message.content),e.form.fields.status=n.status}).catch(function(e){console.error(e)})}},editRow:function(e){this.form.fields.id=e.id,this.form.fields.folio=e.folio,this.form.fields.fecha=e.fecha,this.form.fields.user_id=e.user_id,this.form.fields.status=e.status,this.form_detalles.fields.recepcion_id=e.id,this.limpiarDetalles(),this.getDetallesByMovimiento(),this.setView("update")},deleteSingleRow:function(e){var t=this;this.$q.dialog({title:"Confirmar",message:"¿Desea borrar esta recepción?",ok:"Aceptar",cancel:"Cancelar"}).then(function(){t.delete(e)}).catch(function(){})},delete:function(e){var t=this,n={id:e};this.deleteRecepciones(n).then(function(e){var n=e.data;"success"===n.result?(t.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),t.loadAll(),t.setView("grid")):t.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})},newRow:function(){this.$v.form.$reset(),this.form.fields.id=0,this.form.fields.folio="",this.form.fields.fecha=new Date,this.form.fields.status="NUEVO",this.form.fields.user_id="",this.form_detalles.data=[],this.getFolioNuevo(),this.setView("create")},atras:function(){this.setView("grid"),this.loadAll()},getPresentacion:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/productos/getPresentacionByProducto/"+e.form_detalles.fields.producto_id).then(function(t){var n=t.data;e.form_detalles.fields.presentacion_id=n.productos[0].presentacion_id}).catch(function(e){console.error(e)});case 2:case"end":return t.stop()}},t,e)}))()},saveMovimientosDetalles:function(){var e=this;return s()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$v.form_detalles.$touch(),e.$v.form_detalles.$error?e.$showMessage("¡Advertencia!","Por favor revise los campos."):(e.loadingButton=!0,n=e.form_detalles.fields,e.saveDetalles(n).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.limpiarDetalles(),e.getDetallesByMovimiento()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)}));case 2:case"end":return t.stop()}},t,e)}))()},updateMovimientosDetalles:function(){var e=this;return s()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$v.form_detalles.$touch(),e.$v.form_detalles.$error?e.$showMessage("¡Advertencia!","Por favor revise los campos."):(e.loadingButton=!0,n=e.form_detalles.fields,e.updateDetalles(n).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.form_detalles.editar=!1,e.limpiarDetalles(),e.getDetallesByMovimiento()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)}));case 2:case"end":return t.stop()}},t,e)}))()},getDetallesByMovimiento:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form_detalles.data=[],t.next=3,e.getDetalles({recepcion_id:e.form_detalles.fields.recepcion_id}).then(function(t){var n=t.data;n.recepciones.length>0&&(e.form_detalles.data=n.recepciones)}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},editRowDetalle:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.form_detalles.fields.id=e.id,t.form_detalles.fields.producto_id=e.producto_id,t.form_detalles.fields.cantidad=e.cantidad,t.form_detalles.fields.costo=e.costo,t.form_detalles.fields.recepcion_id=t.form.fields.id,t.getPresentacion(),t.form_detalles.editar=!0,t.$v.form_detalles.$reset();case 8:case"end":return n.stop()}},n,t)}))()},limpiarDetalles:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.form_detalles.fields.id=0,e.form_detalles.fields.producto_id=0,e.form_detalles.fields.presentacion_id=0,e.form_detalles.fields.cantidad=0,e.form_detalles.fields.costo=0,e.form_detalles.fields.recepcion_id=e.form.fields.id,e.form_detalles.editar=!1,e.$v.form_detalles.$reset();case 8:case"end":return t.stop()}},t,e)}))()},deleteSingleRowDetalle:function(e){var t=this;this.$q.dialog({title:"Confirmar",message:"¿Desea borrar este detalle de recepción?",ok:"Aceptar",cancel:"Cancelar"}).then(function(){t.deleteMovimientoDetalle(e)}).catch(function(){})},deleteMovimientoDetalle:function(e){var t=this,n={id:e};this.deleteDetalles(n).then(function(e){var n=e.data;"success"===n.result?(t.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),t.getDetallesByMovimiento()):t.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})},ejecutar:function(){this.form.fields.status="EJECUTADO",this.update()},cancelar:function(){this.form.fields.status="CANCELADO",this.update()},cargaProductos:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.productosOptions=[],t.next=3,e.getProductos({compra_id:e.compra_id}).then(function(t){var n=t.data;e.productosOptions.push({label:"---Seleccione---",value:0}),n.productos.length>0&&n.productos.forEach(function(t){e.productosOptions.push({label:t.nombre,value:t.id})})}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()}}),validations:{form:{fields:{folio:{required:d.required},fecha:{required:d.required}}},form_detalles:{fields:{producto_id:{required:d.required,minValue:Object(d.minValue)(1)},cantidad:{required:d.required,minValue:Object(d.minValue)(1)}}}}},h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.views.grid?n("div",[n("div",{staticClass:"q-pa-sm panel-header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6"}),e._v(" "),n("div",{staticClass:"col-sm-6 pull-right"},[n("div",{staticClass:"q-pa-sm q-gutter-sm"},[n("q-btn",{staticClass:"btn_nuevo",attrs:{icon:"add",label:"Nuevo"},on:{click:function(t){e.newRow()}}})],1)])])]),e._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"col q-pa-md"},[n("div",{staticClass:"col-sm-12",staticStyle:{"padding-bottom":"10px"}},[n("q-search",{attrs:{color:"primary"},model:{value:e.form.filter,callback:function(t){e.$set(e.form,"filter",t)},expression:"form.filter"}})],1),e._v(" "),n("div",{staticClass:"col-sm-12 q-mt-sm",attrs:{id:"sticky-table-scroll"}},[n("q-table",{staticClass:"bg-white",attrs:{id:"sticky-table-newstyle",data:e.form.data,columns:e.form.columns,selected:e.form.selected,filter:e.form.filter,color:"positive",title:"",dense:!0,pagination:e.form.pagination,loading:e.form.loading,"rows-per-page-options":e.form.rowsOptions},on:{"update:selected":function(t){e.$set(e.form,"selected",t)},"update:pagination":function(t){e.$set(e.form,"pagination",t)}},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"folio",attrs:{props:t}},[e._v(e._s(t.row.folio))]),e._v(" "),n("q-td",{key:"fecha_recepcion",attrs:{props:t}},[e._v(e._s(t.row.fecha_recepcion))]),e._v(" "),n("q-td",{key:"name_user",attrs:{props:t}},[e._v(e._s(t.row.name_user))]),e._v(" "),n("q-td",{key:"status",attrs:{props:t}},[n("q-chip",{attrs:{dense:"",icon:t.row.icon,color:t.row.color,"text-color":"white"}},[e._v(e._s(t.row.status))])],1),e._v(" "),n("q-td",{key:"acciones",attrs:{props:t}},[n("q-btn",{attrs:{small:"",flat:"",color:"blue-6",icon:"edit"},on:{click:function(n){e.editRow(t.row)}}},[n("q-tooltip",[e._v("Editar")])],1),e._v(" "),"NUEVO"===t.row.status?n("q-btn",{attrs:{small:"",flat:"",color:"negative",icon:"delete"},on:{click:function(n){e.deleteSingleRow(t.row.id)}}},[n("q-tooltip",[e._v("Eliminar")])],1):e._e()],1)],1)]}}])})],1)])])]):e._e(),e._v(" "),e.views.create?n("div",[n("div",{staticClass:"q-pa-sm panel-header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6"}),e._v(" "),n("div",{staticClass:"col-sm-6 pull-right"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 pull-right"},[n("q-btn",{staticClass:"btn_regresar",staticStyle:{"margin-right":"10px"},attrs:{icon:"fa-arrow-left"},on:{click:function(t){e.atras()}}})],1)])])]),e._v(" "),n("div",{staticClass:"row bg-white"},[n("div",{staticClass:"col q-pa-md"},[n("div",{staticClass:"row q-col-gutter-xs"},[n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"dialpad","icon-color":"dark",error:e.$v.form.fields.folio.$error,"error-label":"Escriba el folio"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Folio",maxlength:"100"},model:{value:e.form.fields.folio,callback:function(t){e.$set(e.form.fields,"folio",t)},expression:"form.fields.folio"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"date_range","icon-color":"dark",error:e.$v.form.fields.fecha.$error,"error-label":"Seleccione una fecha"}},[n("q-datetime",{attrs:{type:"date",inverted:"",color:"dark","float-label":"Fecha",align:"center"},model:{value:e.form.fields.fecha,callback:function(t){e.$set(e.form.fields,"fecha",t)},expression:"form.fields.fecha"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-4"},[n("q-field",{attrs:{icon:"person","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Recibido por",options:e.usersOptions,filter:""},model:{value:e.form.fields.user_id,callback:function(t){e.$set(e.form.fields,"user_id",t)},expression:"form.fields.user_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-2"},[n("q-field",{attrs:{icon:"fas fa-info","icon-color":"dark"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Status",maxlength:"50"},model:{value:e.form.fields.status,callback:function(t){e.$set(e.form.fields,"status",t)},expression:"form.fields.status"}})],1)],1)]),e._v(" "),n("div",{staticClass:"row q-mt-lg"},[n("div",{staticClass:"col-sm-2 offset-sm-10 pull-right"},[n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.save()}}},[e._v("Guardar")])],1)])])])]):e._e(),e._v(" "),e.views.update?n("div",[n("div",{staticClass:"q-pa-sm panel-header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6"}),e._v(" "),n("div",{staticClass:"col-sm-6 pull-right"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 pull-right"},[n("q-btn",{staticClass:"btn_regresar",staticStyle:{"margin-right":"10px"},attrs:{icon:"fa-arrow-left"},on:{click:function(t){e.atras()}}})],1)])])]),e._v(" "),n("div",{staticClass:"row bg-white"},[n("div",{staticClass:"col q-pa-md"},[n("div",{staticClass:"row q-col-gutter-xs"},[n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"dialpad","icon-color":"dark",error:e.$v.form.fields.folio.$error,"error-label":"Escriba el folio"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Folio",maxlength:"100"},model:{value:e.form.fields.folio,callback:function(t){e.$set(e.form.fields,"folio",t)},expression:"form.fields.folio"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"date_range","icon-color":"dark",error:e.$v.form.fields.fecha.$error,"error-label":"Seleccione una fecha"}},[n("q-datetime",{attrs:{type:"date",inverted:"",color:"dark","float-label":"Fecha",align:"center"},model:{value:e.form.fields.fecha,callback:function(t){e.$set(e.form.fields,"fecha",t)},expression:"form.fields.fecha"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-4"},[n("q-field",{attrs:{icon:"person","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Recibido por",options:e.usersOptions,filter:""},model:{value:e.form.fields.user_id,callback:function(t){e.$set(e.form.fields,"user_id",t)},expression:"form.fields.user_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-2"},[n("q-field",{attrs:{icon:"fas fa-info","icon-color":"dark"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Status",maxlength:"50"},model:{value:e.form.fields.status,callback:function(t){e.$set(e.form.fields,"status",t)},expression:"form.fields.status"}})],1)],1)]),e._v(" "),n("div",{staticClass:"row q-mt-lg"},[n("div",{staticClass:"col-sm-12 pull-right"},["NUEVO"===e.form.fields.status?n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.update()}}},[e._v("Guardar")]):e._e(),e._v(" "),"NUEVO"===e.form.fields.status&&e.form_detalles.data.length>0?n("q-btn",{staticClass:"btn_solicitar",attrs:{"icon-right":"check",loading:e.loadingButton},on:{click:function(t){e.ejecutar()}}},[e._v("Ejecutar")]):e._e(),e._v(" "),"NUEVO"===e.form.fields.status?n("q-btn",{attrs:{color:"orange-8","icon-right":"clear",loading:e.loadingButton},on:{click:function(t){e.cancelar()}}},[e._v("Cancelar")]):e._e()],1)]),e._v(" "),n("q-tabs",{staticClass:"shadow-1",staticStyle:{"margin-top":"20px"},attrs:{inverted:"",animated:"",swipeable:"",color:"teal",align:"justify"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab",{attrs:{slot:"title",name:"detalles",icon:"fas fa-box",label:"DETALLES"},slot:"title"}),e._v(" "),n("q-tab-pane",{attrs:{name:"detalles"}},[n("div",{staticClass:"row q-col-gutter-xs"},["NUEVO"===e.form.fields.status?n("div",{staticClass:"row q-mt-lg subtitulos"},[e._v("\n                  Detalles de la recepción\n                ")]):e._e()]),e._v(" "),"NUEVO"===e.form.fields.status?n("div",{staticClass:"row q-col-gutter-xs",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark",error:e.$v.form_detalles.fields.producto_id.$error,"error-label":"Seleccione un producto"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Producto",options:e.productosOptions,filter:""},on:{input:function(t){e.getPresentacion()}},model:{value:e.form_detalles.fields.producto_id,callback:function(t){e.$set(e.form_detalles.fields,"producto_id",t)},expression:"form_detalles.fields.producto_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark"}},[n("q-select",{attrs:{readonly:"",inverted:"",color:"dark","float-label":"Unidad",options:e.presentacionesOptions,filter:""},model:{value:e.form_detalles.fields.presentacion_id,callback:function(t){e.$set(e.form_detalles.fields,"presentacion_id",t)},expression:"form_detalles.fields.presentacion_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-2"},[n("q-field",{attrs:{icon:"style","icon-color":"dark",error:e.$v.form_detalles.fields.cantidad.$error,"error-label":"Ingrese una cantidad"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Cantidad",maxlength:"50"},on:{keyup:function(t){e.isNumber(t,"cantidad")}},model:{value:e.form_detalles.fields.cantidad,callback:function(t){e.$set(e.form_detalles.fields,"cantidad",t)},expression:"form_detalles.fields.cantidad"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-2 pull-right"},[!1===this.form_detalles.editar&&"NUEVO"===this.form.fields.status?n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"add",loading:e.loadingButton},on:{click:function(t){e.saveMovimientosDetalles()}}},[e._v("Agregar")]):e._e(),e._v(" "),!0===this.form_detalles.editar&&"NUEVO"===this.form.fields.status?n("q-btn",{staticClass:"btn_actualizar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.updateMovimientosDetalles()}}},[e._v("Actualizar")]):e._e()],1)]):e._e(),e._v(" "),n("div",{staticClass:"row q-mt-sm",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"col-sm-12"},[n("q-search",{attrs:{color:"primary"},model:{value:e.form_detalles.filter,callback:function(t){e.$set(e.form_detalles,"filter",t)},expression:"form_detalles.filter"}})],1),e._v(" "),n("div",{staticClass:"col-sm-12 q-mt-sm",attrs:{id:"sticky-table-scroll-corto"}},[n("q-table",{attrs:{id:"sticky-table-newstyle",data:e.form_detalles.data,columns:e.form_detalles.columns,selected:e.form_detalles.selected,filter:e.form_detalles.filter,color:"positive",title:"",dense:!0,pagination:e.form_detalles.pagination,loading:e.form_detalles.loading,"rows-per-page-options":e.form_detalles.rowsOptions},on:{"update:selected":function(t){e.$set(e.form_detalles,"selected",t)},"update:pagination":function(t){e.$set(e.form_detalles,"pagination",t)}},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"producto",attrs:{props:t}},[e._v(e._s(t.row.producto))]),e._v(" "),n("q-td",{key:"cantidad",attrs:{props:t}},[e._v(e._s(t.row.cantidad))]),e._v(" "),n("q-td",{key:"acciones",attrs:{props:t}},["NUEVO"===e.form.fields.status?n("q-btn",{attrs:{small:"",flat:"",color:"blue-6",icon:"edit"},on:{click:function(n){e.editRowDetalle(t.row)}}},[n("q-tooltip",[e._v("Editar")])],1):e._e(),e._v(" "),"NUEVO"===e.form.fields.status?n("q-btn",{attrs:{small:"",flat:"",color:"negative",icon:"delete"},on:{click:function(n){e.deleteSingleRowDetalle(t.row.id)}}},[n("q-tooltip",[e._v("Eliminar")])],1):e._e(),e._v(" "),"EJECUTADO"===e.form.fields.status?n("q-btn",{attrs:{small:"",flat:"",color:"cyan",icon:"fas fa-check"}},[n("q-tooltip",[e._v(e._s(e.form.fields.status))])],1):e._e(),e._v(" "),"CANCELADO"===e.form.fields.status?n("q-btn",{attrs:{small:"",flat:"",color:"orange-8",icon:"clear"}},[n("q-tooltip",[e._v(e._s(e.form.fields.status))])],1):e._e()],1)],1)]}}])}),e._v(" "),n("q-inner-loading",{attrs:{visible:e.form_detalles.loading}},[n("q-spinner-dots",{attrs:{size:"64px",color:"primary"}})],1)],1)])])],1)],1)])]):e._e()])},g=[];h._withStripped=!0;var _=n("XyMi"),b=!1;var y=function(e){b||n("rDfH")},w=Object(_.a)(v,h,g,!1,y,"data-v-27adaaf0",null);w.options.__file="src/components/layout/cmp/Recepciones.vue";var C=w.exports,q=n("9VIl"),x={components:{},props:{show:{type:Boolean}},data:function(){return{almacenesOptions:[{label:"---Seleccione---",value:0}],bom:!1,editar_bom:!1,lineasOptions:[{label:"---Seleccione---",value:0}],lineasBomOptions:[{label:"---Seleccione---",value:0}],productosOptions:[{label:"---Seleccione---",value:0}],money:{decimal:".",thousands:",",precision:2,masked:!1},loadingButton:!1,views:{grid:!0,create:!1,update:!1},form:{fields:{id:0,nombre:"",tipo_id:0,codigo:"",linea_id:0,presentacion_id:0,clave_producto_id:0,precio_a:0,precio_b:0,precio_c:0,precio_d:0,precio_e:0,numero_parte:""},data:[],columns:[{name:"codigo_compuesto",label:"Código",field:"codigo_compuesto",sortable:!0,type:"string",align:"left"},{name:"nombre",label:"Nombre",field:"nombre",sortable:!0,type:"string",align:"left"},{name:"categoria",label:"Categoría",field:"categoria",sortable:!0,type:"string",align:"left"},{name:"presentacion",label:"Presentación",field:"presentacion",sortable:!0,type:"string",align:"left"},{name:"linea",label:"Línea",field:"linea",sortable:!0,type:"string",align:"left"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],rowsOptions:[3,5,7,10,15,20,25,50],pagination:{rowsPerPage:50},selected:[],filter:"",loading:!1},form_bom:{fields:{id:0,producto_id:0,material_id:0,cantidad:0,almacen_id:0,empresa_id:0,linea_id:0,presentacion_id:0,categoria_id:0},columns:[{name:"categoria",label:"Categoría",field:"categoria",sortable:!0,type:"string",align:"left"},{name:"unidad",label:"Unidad",field:"unidad",sortable:!0,type:"string",align:"left"},{name:"producto",label:"Producto",field:"producto",sortable:!0,type:"string",align:"left"},{name:"cantidad",label:"Cantidad",field:"cantidad",sortable:!0,type:"string",align:"left"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],data:[],rowsOptions:[3,5,7,10,15,20,25,50],pagination:{rowsPerPage:50},selected:[],filter:"",loading:!1},modal:{x:0,y:0,transition:null}}},directives:{money:q.VMoney},computed:l()({},Object(c.c)({productos:"inv/productos/productos",claveProductoOptions:"inv/productos/selectClaveProductosOptions"}),{tiposOptions:function(){var e=this.$store.getters["inv/tipos_articulos/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e},presentacionesOptions:function(){var e=this.$store.getters["inv/tipos_presentaciones/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e},empresasOptions:function(){var e=this.$store.getters["vnt/empresa/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.razon_social>t.razon_social?1:e.razon_social<t.razon_social?-1:0}),e}}),created:function(){this.loadAll()},watch:{show:function(e,t){!0===e&&this.loadAll()}},methods:l()({},Object(c.b)({getProductosByCategoria:"inv/productos/getByCategoria",saveProductos:"inv/productos/save",updateProductos:"inv/productos/update",deleteProductos:"inv/productos/delete",getTiposProductos:"inv/tipos_articulos/refresh",getLineas:"inv/lineas/refresh",getPresentaciones:"inv/tipos_presentaciones/refresh",getLineasByCategoria:"inv/lineas/getByCategoria",getClaveProductos:"inv/productos/getClaveProductos",getBomByProducto:"inv/bom/getByProducto",getEmpresas:"vnt/empresa/refresh",getAlmacenesByEmpresa:"inv/almacenes/getByEmpresa",getProductosByLinea:"inv/productos/getProductoByLinea",saveBom:"inv/bom/save",updateBom:"inv/bom/update",deleteBom:"inv/bom/delete"}),{loadAll:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.loading=!0,t.next=3,e.getTiposProductos();case 3:return t.next=5,e.getLineas();case 5:return t.next=7,e.getPresentaciones();case 7:e.form.loading=!1;case 8:case"end":return t.stop()}},t,e)}))()},setView:function(e){this.views.grid=!1,this.views.create=!1,this.views.update=!1,this.views[e]=!0},getProductos:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.data=[],t.next=3,e.getProductosByCategoria({categoria:e.form.fields.tipo_id}).then(function(t){var n=t.data;n.productos.length>0&&(e.form.data=n.productos)}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},evaluaMonto:function(e){this.cadena2=""+e,this.cadena=this.cadena2.split(","),this.monto_a_pagar="";for(var t=0;t<this.cadena.length;t++)this.monto_a_pagar=this.monto_a_pagar+this.cadena[t];return parseFloat(this.monto_a_pagar)},save:function(){var e=this;if(this.form.fields.nombre=this.form.fields.nombre.trim(),this.$v.form.$touch(),this.$v.form.$error)this.$showMessage("¡Advertencia!","Por favor revise los campos.");else{this.loadingButton=!0;var t=this.form.fields;t.precio_a_validado=this.evaluaMonto(this.form.fields.precio_a),t.precio_b_validado=this.evaluaMonto(this.form.fields.precio_b),t.precio_c_validado=this.evaluaMonto(this.form.fields.precio_C),t.precio_d_validado=this.evaluaMonto(this.form.fields.precio_d),t.precio_e_validado=this.evaluaMonto(this.form.fields.precio_e),this.saveProductos(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.form.fields.id=n.id,e.form_bom.fields.producto_id=n.id,e.newRow()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})}},update:function(){var e=this;if(this.form.fields.nombre=this.form.fields.nombre.trim(),this.$v.form.$touch(),this.$v.form.$error)this.$showMessage("Error","Por favor revise los campos.");else{this.loadingButton=!0;var t=this.form.fields;t.precio_a_validado=this.evaluaMonto(this.form.fields.precio_a),t.precio_b_validado=this.evaluaMonto(this.form.fields.precio_b),t.precio_c_validado=this.evaluaMonto(this.form.fields.precio_c),t.precio_d_validado=this.evaluaMonto(this.form.fields.precio_d),t.precio_e_validado=this.evaluaMonto(this.form.fields.precio_e),this.updateProductos(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})}},editRow:function(e){this.form.fields.id=e.id,this.form.fields.nombre=e.nombre,this.form.fields.tipo_id=e.tipo_id,this.form.fields.codigo=e.codigo,this.form.fields.presentacion_id=e.presentacion_id,this.form.fields.clave_producto_id=e.clave_producto_id,this.cargarLineasByCategoria(),this.form.fields.linea_id=e.linea_id,this.form.fields.precio_a=e.precio_a,this.form.fields.precio_b=e.precio_b,this.form.fields.precio_c=e.precio_c,this.form.fields.precio_d=e.precio_d,this.form.fields.precio_e=e.precio_e,this.form.fields.numero_parte=e.numero_parte,this.form_bom.fields.producto_id=e.id,this.limpiarBom(),this.getBom(),this.setView("update")},deleteSingleRow:function(e){var t=this;this.$q.dialog({title:"Confirmar",message:"¿Desea borrar este producto?",ok:"Aceptar",cancel:"Cancelar"}).then(function(){t.delete(e)}).catch(function(){})},delete:function(e){var t=this,n={id:e};this.deleteProductos(n).then(function(e){var n=e.data;"success"===n.result?(t.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),t.loadAll(),t.setView("grid")):t.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})},newRow:function(){this.$v.form.$reset(),this.form.fields.id=0,this.form.fields.nombre="",this.form.fields.tipo_id=0,this.form.fields.codigo="",this.form.fields.linea_id=0,this.form.fields.presentacion_id=0,this.form.fields.clave_producto_id=0,this.form.fields.precio_a=0,this.form.fields.precio_b=0,this.form.fields.precio_c=0,this.form.fields.precio_d=0,this.form.fields.precio_e=0,this.form.fields.numero_parte="",this.setView("create")},cargarLineasByCategoria:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.lineasOptions=[],e.form.fields.linea_id=0,t.next=4,e.getLineasByCategoria({categoria_id:e.form.fields.tipo_id}).then(function(t){var n=t.data;e.lineasOptions.push({label:"---Seleccione---",value:0}),n.lineas.length>0&&n.lineas.forEach(function(t){e.lineasOptions.push({label:t.nombre,value:t.id})})}).catch(function(e){console.error(e)});case 4:case"end":return t.stop()}},t,e)}))()},cargarLineasByCategoria2:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.lineasBomOptions=[],e.form_bom.fields.linea_id=0,t.next=4,e.getLineasByCategoria({categoria_id:e.form_bom.fields.categoria_id}).then(function(t){var n=t.data;e.lineasBomOptions.push({label:"---Seleccione---",value:0}),n.lineas.length>0&&n.lineas.forEach(function(t){e.lineasBomOptions.push({label:t.nombre,value:t.id})})}).catch(function(e){console.error(e)});case 4:case"end":return t.stop()}},t,e)}))()},atras:function(){this.loadAll(),this.setView("grid"),this.lineasOptions=[],this.lineasOptions.push({label:"---Seleccione---",value:0})},getBom:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form_bom.data=[],t.next=3,e.getBomByProducto({producto_id:e.form.fields.id}).then(function(t){var n=t.data;n.bom.length>0&&(e.form_bom.data=n.bom)}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},crearBom:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.bom=!0,e.editar_bom=!1,t.next=4,e.getTiposProductos();case 4:e.limpiarBom();case 5:case"end":return t.stop()}},t,e)}))()},cargaAlmacenes:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.almacenesOptions=[],e.form_bom.fields.almacen_id=0,t.next=4,e.getAlmacenesByEmpresa({empresa_id:e.form_bom.fields.empresa_id}).then(function(t){var n=t.data;e.almacenesOptions.push({label:"---Seleccione---",value:0}),n.almacenes.length>0&&n.almacenes.forEach(function(t){e.almacenesOptions.push({label:t.nombre,value:t.id})})}).catch(function(e){console.error(e)});case 4:case"end":return t.stop()}},t,e)}))()},getProductosOpt:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.productosOptions=[],e.form_bom.fields.material_id=0,t.next=4,e.getProductosByLinea({linea:e.form_bom.fields.linea_id}).then(function(t){var n=t.data;e.productosOptions.push({label:"---Seleccione---",value:0}),n.productosOpt.length>0&&n.productosOpt.forEach(function(t){e.productosOptions.push({label:t.nombre,value:t.id})})}).catch(function(e){console.error(e)});case 4:case"end":return t.stop()}},t,e)}))()},isNumber:function(e,t){switch(t){case"cantidad":this.form_bom.fields.cantidad=this.form_bom.fields.cantidad.replace(/[^0-9.]/g,""),this.$v.form_bom.fields.cantidad.$touch()}},guardarBom:function(){var e=this;if(this.$v.form_bom.$touch(),this.$v.form_bom.$error)this.$showMessage("Error","Por favor revise los campos.");else{var t=this.form_bom.fields;this.saveBom(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.limpiarBom(),e.getBom()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})}},editarBom:function(){var e=this;if(this.$v.form_bom.$touch(),this.$v.form_bom.$error)this.$showMessage("Error","Por favor revise los campos.");else{var t=this.form_bom.fields;this.updateBom(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.bom=!1,e.editar_bom=!1,e.getBom()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})}},getPresentacion:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/productos/getPresentacionByProducto/"+e.form_bom.fields.material_id).then(function(t){var n=t.data;e.form_bom.fields.presentacion_id=n.productos[0].presentacion_id}).catch(function(e){console.error(e)});case 2:case"end":return t.stop()}},t,e)}))()},limpiarBom:function(){this.$v.form_bom.$reset(),this.form_bom.fields.categoria_id=0,this.form_bom.fields.linea_id=0,this.form_bom.fields.cantidad=0,this.form_bom.fields.presentacion_id=0,this.form_bom.fields.material_id=0},editBom:function(e){this.form_bom.fields.id=e.id,this.form_bom.fields.categoria_id=e.categoria_id,this.cargarLineasByCategoria2(),this.form_bom.fields.linea_id=e.linea_id,this.form_bom.fields.cantidad=e.cantidad,this.form_bom.fields.presentacion_id=e.presentacion_id,this.getProductosOpt(),this.form_bom.fields.material_id=e.material_id,this.bom=!0,this.editar_bom=!0},deleteSingleBom:function(e){var t=this;this.$q.dialog({title:"Confirmar",message:"¿Desea borrar este registro?",ok:"Aceptar",cancel:"Cancelar"}).then(function(){t.borrarBom(e)}).catch(function(){})},borrarBom:function(e){var t=this,n={id:e};this.deleteBom(n).then(function(e){var n=e.data;"success"===n.result?(t.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),t.getBom()):t.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})},searchClavProd:function(e,t){var n=this;this.getClaveProductos({search:e}).then(function(){t(n.claveProductoOptions)}).catch(function(e){console.error(e)})},close:function(){this.$emit("closeModal",!1)}}),validations:{form:{fields:{nombre:{required:d.required,maxLength:Object(d.maxLength)(100)},tipo_id:{required:d.required,minValue:Object(d.minValue)(1)},codigo:{required:d.required,minLength:Object(d.minLength)(1)},linea_id:{required:d.required,minValue:Object(d.minValue)(1)},presentacion_id:{required:d.required,minValue:Object(d.minValue)(1)}}},form_bom:{fields:{categoria_id:{required:d.required,minValue:Object(d.minValue)(1)},linea_id:{required:d.required,minValue:Object(d.minValue)(1)},producto_id:{required:d.required,minValue:Object(d.minValue)(1)},cantidad:{required:d.required,minValue:Object(d.minValue)(1e-4)},material_id:{required:d.required,minValue:Object(d.minValue)(1)}}}}},k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-modal",{staticStyle:{"background-color":"rgba(0,0,0,0.7)"},attrs:{"content-css":{width:"70vw",height:"300px"}},on:{hide:function(t){e.close()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("q-modal-layout",[n("q-toolbar",{staticStyle:{"background-color":"rgba(8,85,134,1)!important"},attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"col-sm-6"},[n("q-toolbar-title",[e._v("\n          Nuevo producto\n        ")])],1),e._v(" "),n("div",{staticClass:"col-sm-6 pull-right"},[n("q-btn",{attrs:{flat:"",round:"",dense:"",color:"white",icon:"fas fa-times-circle"},on:{click:function(t){e.close()}}})],1)]),e._v(" "),n("div",{staticClass:"q-pa-md bg-grey-3"},[n("div",{staticClass:"row bg-white border-panel"},[n("div",{staticClass:"col q-pa-md col-sm-12"},[n("div",{staticClass:"row q-col-gutter-xs"},[n("div",{staticClass:"col-sm-12 pull-right"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 pull-right"},[n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.save()}}},[e._v("Guardar")])],1)])])]),e._v(" "),n("div",{staticClass:"col q-pa-md"},[n("div",{staticClass:"row q-col-gutter-xs"},[n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-tasks","icon-color":"dark",error:e.$v.form.fields.tipo_id.$error,"error-label":"Ingrese una categoría"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Categoría",options:e.tiposOptions,filter:""},on:{input:function(t){e.cargarLineasByCategoria()}},model:{value:e.form.fields.tipo_id,callback:function(t){e.$set(e.form.fields,"tipo_id",t)},expression:"form.fields.tipo_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"view_week","icon-color":"dark",error:e.$v.form.fields.linea_id.$error,"error-label":"Ingrese una categoría"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Línea",options:e.lineasOptions,filter:""},model:{value:e.form.fields.linea_id,callback:function(t){e.$set(e.form.fields,"linea_id",t)},expression:"form.fields.linea_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark",error:e.$v.form.fields.presentacion_id.$error,"error-label":"Elija una presentación"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Unidad",options:e.presentacionesOptions,filter:""},model:{value:e.form.fields.presentacion_id,callback:function(t){e.$set(e.form.fields,"presentacion_id",t)},expression:"form.fields.presentacion_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"dialpad","icon-color":"dark",error:e.$v.form.fields.codigo.$error,"error-label":"Ingrese un código"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Código",maxlength:"100"},model:{value:e.form.fields.codigo,callback:function(t){e.$set(e.form.fields,"codigo",t)},expression:"form.fields.codigo"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark",error:e.$v.form.fields.nombre.$error,"error-label":"Ingrese un nombre"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Nombre",maxlength:"100"},model:{value:e.form.fields.nombre,callback:function(t){e.$set(e.form.fields,"nombre",t)},expression:"form.fields.nombre"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark"}},[n("q-input",{attrs:{type:"text",inverted:"",color:"dark","float-label":"Clave producto servicio",maxlength:"100"},model:{value:e.form.fields.clave_producto_id,callback:function(t){e.$set(e.form.fields,"clave_producto_id",t)},expression:"form.fields.clave_producto_id"}},[n("q-autocomplete",{on:{search:e.searchClavProd}})],1)],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"label","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Número de parte",maxlength:"100"},model:{value:e.form.fields.numero_parte,callback:function(t){e.$set(e.form.fields,"numero_parte",t)},expression:"form.fields.numero_parte"}})],1)],1)])])])])],1)],1)},O=[];k._withStripped=!0;var $=!1;var P=function(e){$||n("0rJ7")},E=Object(_.a)(x,k,O,!1,P,"data-v-35f90412",null);E.options.__file="src/components/layout/cmp/Products.vue";var S={components:{Recepciones:C,Products:E.exports},beforeRouteEnter:function(e,t,n){n(function(e){for(var o=!1,r=e.$store.getters["user/role"],i=0;i<r.length;i++)r[i].toUpperCase()!=="admin".toUpperCase()&&r[i].toUpperCase()!=="ROOT".toUpperCase()&&r[i].toUpperCase()!=="CLIENTE".toUpperCase()&&r[i].toUpperCase()!=="LIDER".toUpperCase()&&r[i].toUpperCase()!=="COORDINADOR".toUpperCase()&&r[i].toUpperCase()!=="GERENTE DE OPERACIONES".toUpperCase()&&r[i].toUpperCase()!=="PMO".toUpperCase()&&r[i].toUpperCase()!=="FINANZAS".toUpperCase()&&r[i].toUpperCase()!=="OPERACIÓN".toUpperCase()&&r[i].toUpperCase()!=="LICITACIONES".toUpperCase()&&r[i].toUpperCase()!=="LICITACIONES - SOLICITUDES".toUpperCase()&&r[i].toUpperCase()!=="INVENTARIOS".toUpperCase()&&r[i].toUpperCase()!=="GERENTE".toUpperCase()&&r[i].toUpperCase()!=="AUXILIAR".toUpperCase()&&r[i].toUpperCase()!=="VENTAS".toUpperCase()&&r[i].toUpperCase()!=="COMPRAS".toUpperCase()||(o=!0);o?n():n("/"===t.path?"/dashboard":t.path)})},data:function(){return{direccionesOptions:[],sucursalesOptions:[],entregaOptions:[{label:"EMPRESA",value:"EMPRESA"},{label:"SUCURSAL",value:"SUCURSAL"},{label:"OTRO",value:"OTRO"}],modal_producto:!1,tab:"detalles",loadingButton:!1,views:{grid:!0,create:!1,update:!1},form:{fields:{id:0,folio:"",fecha:"",proveedor_id:"",status:0,project_id:0,empresa_id:0,condiciones_pago:"",condiciones_entrega:"",transporte:"",entrega:"",direccion_id:0,sucursal_id:0,direccion_entrega:"",observaciones:""},columns:[{name:"folio",label:"Folio",field:"folio",sortable:!0,type:"string",align:"center"},{name:"status",label:"Status",field:"status",sortable:!0,type:"string",align:"left"},{name:"empresa",label:"Empresa",field:"empresa",sortable:!0,type:"string",align:"left"},{name:"proveedor",label:"Proveedor",field:"proveedor",sortable:!0,type:"string",align:"center"},{name:"fecha_compra",label:"Fecha",field:"fecha_compra",sortable:!0,type:"string",align:"center"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],rowsOptions:[3,5,7,10,15,20,25,50],pagination:{rowsPerPage:50},selected:[],filter:"",loading:!1},form_detalles:{data:[],editar:!1,fields:{id:0,producto_id:0,presentacion_id:0,cantidad:0,costo:0,compra_id:0,descripcion:""},columns:[{name:"producto",label:"Producto",field:"producto",sortable:!0,type:"string",align:"left"},{name:"cantidad",label:"Cantidad",field:"cantidad",sortable:!0,type:"string",align:"right"},{name:"costo",label:"Costo",field:"costo",sortable:!0,type:"string",align:"right"},{name:"importe",label:"Importe",field:"importe",sortable:!0,type:"string",align:"right"},{name:"total_recibido",label:"Recibido",field:"total_recibido",sortable:!0,type:"string",align:"right"},{name:"descripcion",label:"Descripción",field:"descripcion",sortable:!0,type:"string",align:"left"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],rowsOptions:[3,5,7,10,15,20,25,50],pagination:{rowsPerPage:50},selected:[],filter:"",loading:!1},modal:{x:0,y:0,transition:null}}},computed:l()({},Object(c.c)({compras:"cmp/compras/compras"}),{proveedoresOptions:function(){var e=this.$store.getters["pmo/proveedor/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e},productosOptions:function(){var e=this.$store.getters["inv/productos/selectOptions"];return e.push({label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e},presentacionesOptions:function(){var e=this.$store.getters["inv/tipos_presentaciones/selectOptions"];return e.push({label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e},proyectoOptions:function(){var e=this.$store.getters["pmo/proyecto/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre_proyecto>t.nombre_proyecto?1:e.nombre_proyecto<t.nombre_proyecto?-1:0}),e},empresasOptions:function(){var e=this.$store.getters["vnt/empresa/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.razon_social>t.razon_social?1:e.razon_social<t.razon_social?-1:0}),e}}),created:function(){this.loadAll()},watch:{tab:function(e,t){"detalles"===e&&this.getDetallesByMovimiento()}},methods:l()({},Object(c.b)({getCompras:"cmp/compras/refresh",saveCompras:"cmp/compras/save",updateCompras:"cmp/compras/update",deleteCompras:"cmp/compras/delete",getProveedores:"pmo/proveedor/refresh",getEmpresas:"vnt/empresa/refresh",getMunicipiosByEstado:"vnt/municipio/getByEstado",getFolioConsecutivo:"cmp/compras/getFolioConsecutivo",getTiposMovimientos:"inv/tipos_movimientos/refresh",getProductos:"inv/productos/refresh",getPresentaciones:"inv/tipos_presentaciones/refresh",getDetalles:"cmp/compras_detalles/getByCompra",saveDetalles:"cmp/compras_detalles/save",updateDetalles:"cmp/compras_detalles/update",deleteDetalles:"cmp/compras_detalles/delete",getProyectos:"pmo/proyecto/refresh",deleteByCompra:"cmp/compras_detalles/deleteByCompra"}),{loadAll:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.loading=!0,t.next=3,e.getCompras();case 3:return t.next=5,e.getProveedores();case 5:return t.next=7,e.getProductos();case 7:return t.next=9,e.getPresentaciones();case 9:return t.next=11,e.getProyectos();case 11:return t.next=13,e.getEmpresas();case 13:e.form.loading=!1;case 14:case"end":return t.stop()}},t,e)}))()},setView:function(e){this.views.grid=!1,this.views.create=!1,this.views.update=!1,this.views[e]=!0},getFolioNuevo:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.fields.folio="",t.next=3,e.getFolioConsecutivo().then(function(t){var n=t.data;"success"===n.result&&(e.form.fields.folio=n.folio)}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},cargaMunicipios:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.municipiosOptions=[],e.form.fields.municipio_id=0,t.next=4,e.getMunicipiosByEstado({estado_id:e.form.fields.estado_id}).then(function(t){var n=t.data;e.municipiosOptions.push({label:"---Seleccione---",value:0}),n.municipios.length>0&&n.municipios.forEach(function(t){e.municipiosOptions.push({label:t.nombre,value:t.id})})}).catch(function(e){console.error(e)});case 4:case"end":return t.stop()}},t,e)}))()},isNumber:function(e,t){switch(t){case"cantidad":this.form_detalles.fields.cantidad=this.form_detalles.fields.cantidad.replace(/[^0-9.]/g,""),this.$v.form_detalles.fields.cantidad.$touch();break;case"costo":this.form_detalles.fields.costo=this.form_detalles.fields.costo.replace(/[^0-9.]/g,""),this.$v.form_detalles.fields.costo.$touch()}},save:function(){var e=this;if(this.$v.form.$touch(),this.$v.form.$error)this.$showMessage("¡Advertencia!","Por favor revise los campos.");else{this.loadingButton=!0,this.form.fields.fecha=u()(String(this.form.fields.fecha)).utcOffset("-04:00:00",!1).format("YYYY-MM-DD HH:mm:ss");var t=this.form.fields;this.saveCompras(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.form.fields.id=n.id,e.form_detalles.fields.compra_id=n.id,e.limpiarDetalles(),e.getDetallesByMovimiento(),e.setView("update")):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})}},update:function(){var e=this;if(this.$v.form.$touch(),this.$v.form.$error)this.$showMessage("Error","Por favor revise los campos.");else{this.loadingButton=!0;var t=this.form.fields;t.direccion_id=this.form.fields.direccion_id,this.$q.loading.show({message:"Cargando..."}),this.updateCompras(t).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.$q.loading.hide()):(e.$q.loading.hide(),e.$showMessage(n.message.title,n.message.content)),e.form.fields.status=n.status}).catch(function(e){console.error(e)})}},editRow:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.form.fields.id=e.id,t.form.fields.folio=e.folio,t.form.fields.fecha=e.fecha,t.form.fields.proveedor_id=e.proveedor_id,t.form.fields.status=e.status,t.form.fields.project_id=e.project_id,t.form.fields.empresa_id=e.empresa_id,t.form.fields.condiciones_pago=e.condiciones_pago,t.form.fields.condiciones_entrega=e.condiciones_entrega,t.form.fields.transporte=e.transporte,t.form.fields.entrega=e.entrega,null===e.direccion_id?t.form.fields.direccion_id=0:t.form.fields.direccion_id=e.direccion_id,null===e.sucursal_id?t.form.fields.sucursal_id=0:t.form.fields.sucursal_id=e.sucursal_id,t.form.fields.direccion_entrega=e.direccion_entrega,t.form_detalles.fields.compra_id=e.id,t.form.fields.observaciones=e.observaciones,!(t.form.fields.empresa_id>0)){n.next=21;break}return n.next=19,t.getDirecciones();case 19:return n.next=21,t.getSucursales();case 21:t.limpiarDetalles(),t.getDetallesByMovimiento(),t.setView("update");case 24:case"end":return n.stop()}},n,t)}))()},deleteSingleRow:function(e){var t=this;this.$q.dialog({title:"Confirmar",message:"¿Desea borrar esta compra?",ok:"Aceptar",cancel:"Cancelar"}).then(function(){t.delete(e)}).catch(function(){})},delete:function(e){var t=this,n={id:e};this.deleteCompras(n).then(function(e){var n=e.data;"success"===n.result?(t.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),t.loadAll(),t.setView("grid")):t.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})},newRow:function(){this.$v.form.$reset(),this.form.fields.id=0,this.form.fields.folio="",this.form.fields.fecha=new Date,this.form.fields.status="NUEVO",this.form.fields.proveedor_id="",this.form.fields.project_id=0,this.form.fields.empresa_id=0,this.form.fields.condiciones_pago="",this.form.fields.condiciones_entrega="",this.form.fields.transporte="",this.form.fields.entrega="",this.form.fields.direccion_id=0,this.form.fields.sucursal_id=0,this.form.fields.direccion_entrega="",this.form.fields.observaciones="",this.getFolioNuevo(),this.setView("create")},atras:function(){this.setView("grid"),this.loadAll()},getPresentacion:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/productos/getPresentacionByProducto/"+e.form_detalles.fields.producto_id).then(function(t){var n=t.data;e.form_detalles.fields.presentacion_id=n.productos[0].presentacion_id}).catch(function(e){console.error(e)});case 2:case"end":return t.stop()}},t,e)}))()},saveMovimientosDetalles:function(){var e=this;return s()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$v.form_detalles.$touch(),e.$v.form_detalles.$error?e.$showMessage("¡Advertencia!","Por favor revise los campos."):(e.loadingButton=!0,n=e.form_detalles.fields,e.saveDetalles(n).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.limpiarDetalles(),e.getDetallesByMovimiento()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)}));case 2:case"end":return t.stop()}},t,e)}))()},updateMovimientosDetalles:function(){var e=this;return s()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$v.form_detalles.$touch(),e.$v.form_detalles.$error?e.$showMessage("¡Advertencia!","Por favor revise los campos."):(e.loadingButton=!0,n=e.form_detalles.fields,e.updateDetalles(n).then(function(t){var n=t.data;e.loadingButton=!1,"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"check",position:"top-right"}),e.form_detalles.editar=!1,e.limpiarDetalles(),e.getDetallesByMovimiento()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)}));case 2:case"end":return t.stop()}},t,e)}))()},getDetallesByMovimiento:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form_detalles.data=[],t.next=3,e.getDetalles({compra_id:e.form_detalles.fields.compra_id}).then(function(t){var n=t.data;n.movimientos_detalles.length>0&&(e.form_detalles.data=n.movimientos_detalles)}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},editRowDetalle:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.form_detalles.fields.id=e.id,t.form_detalles.fields.producto_id=e.producto_id,t.form_detalles.fields.presentacion_id=e.presentacion_id,t.form_detalles.fields.cantidad=e.cantidad,t.form_detalles.fields.costo=e.costo,t.form_detalles.fields.descripcion=e.descripcion,t.form_detalles.fields.compra_id=t.form.fields.id,t.form_detalles.editar=!0,t.$v.form_detalles.$reset();case 9:case"end":return n.stop()}},n,t)}))()},limpiarDetalles:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.form_detalles.fields.id=0,e.form_detalles.fields.producto_id=0,e.form_detalles.fields.presentacion_id=0,e.form_detalles.fields.cantidad=0,e.form_detalles.fields.costo=0,e.form_detalles.fields.descripcion="",e.form_detalles.fields.compra_id=e.form.fields.id,e.form_detalles.editar=!1,e.$v.form_detalles.$reset();case 9:case"end":return t.stop()}},t,e)}))()},deleteSingleRowDetalle:function(e){var t=this;this.$q.dialog({title:"Confirmar",message:"¿Desea borrar este detalle de compra?",ok:"Aceptar",cancel:"Cancelar"}).then(function(){t.deleteMovimientoDetalle(e)}).catch(function(){})},deleteMovimientoDetalle:function(e){var t=this,n={id:e};this.deleteDetalles(n).then(function(e){var n=e.data;"success"===n.result?(t.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),t.getDetallesByMovimiento()):t.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})},solicitar:function(){this.form.fields.status="SOLICITADO",this.update()},aprobar:function(){this.form.fields.status="ORDEN DE COMPRA",this.update()},comprar:function(){this.form.fields.status="COMPRA",this.update()},rechazar:function(){this.form.fields.status="NUEVO",this.update()},crear_solicitudes:function(e){this.$router.push({path:"/ejecucion_presupuestos/"+e+"/compra/"+this.form.fields.id+"/"+this.form.fields.proveedor_id+"/"+this.form.fields.empresa_id})},exportPDF:function(){var e;e="https://api_impact.wasp.mx/compras/exportPDF_compra/"+this.form.fields.id,window.open(e,"_blank")},modalProducto:function(e){this.modal_producto=e,!1===e&&this.getProductos()},exportCSV:function(){window.open("https://api_impact.wasp.mx/compras_detalles/exportCSV","_blank")},loadingMessage:function(e){this.$q.loading.show({message:e})},cargarCSV:function(){var e=this;this.loadingMessage("Cargando los datos del csv ...");var t=this.$refs.fileInputCSV.files[0],n=new FormData;n.append("file",t),n.append("compra_id",this.form.fields.id),m.a.post("/compras_detalles/cargarCSV",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){"success"===t.data.result?(e.$q.notify({message:t.data.message,timeout:3e3,type:"green",textColor:"white",icon:"done",position:"top-right"}),e.getDetallesByMovimiento(),e.$q.loading.hide()):(e.$q.loading.hide(),""!==t.data.err&&e.$showMessage("Errores en archivo",t.data.err))}).catch(function(t){e.$q.loading.hide(),console.error(t)})},deleteAll:function(){var e=this;this.$q.dialog({title:"Confirmar",message:"¿Desea borrar todos los detalles de la compra?",ok:"Aceptar",cancel:"Cancelar"}).then(function(){e.deleteAllDetails()}).catch(function(){})},deleteAllDetails:function(){var e=this,t={compra_id:this.form.fields.id};this.deleteByCompra(t).then(function(t){var n=t.data;"success"===n.result?(e.$q.notify({message:n.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),e.getDetallesByMovimiento()):e.$showMessage(n.message.title,n.message.content)}).catch(function(e){console.error(e)})},getDirecciones:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.direccionesOptions=[],t.next=3,m.a.get("/direcciones/getByEmpresaOptions/"+e.form.fields.empresa_id).then(function(t){var n=t.data;e.direccionesOptions=n.direcciones}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},getSucursales:function(){var e=this;return s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.sucursalesOptions=[],t.next=3,m.a.get("/sucursales/getByEmpresaOptions/"+e.form.fields.empresa_id).then(function(t){var n=t.data;e.sucursalesOptions=n.sucursales}).catch(function(e){console.error(e)});case 3:case"end":return t.stop()}},t,e)}))()},cargaDireccionesSucursales:function(){this.form.fields.empresa_id&&("EMPRESA"===this.form.fields.entrega&&this.getDirecciones(),"SUCURSAL"===this.form.fields.entrega&&this.getSucursales())}}),validations:{form:{fields:{folio:{required:d.required},fecha:{required:d.required},empresa_id:{required:d.required,minValue:Object(d.minValue)(1)}}},form_detalles:{fields:{producto_id:{required:d.required,minValue:Object(d.minValue)(1)},cantidad:{required:d.required},costo:{required:d.required,minValue:Object(d.minValue)(0)}}}}},M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[e.views.grid?n("div",[n("div",{staticClass:"q-pa-sm panel-header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6"},[n("div",{staticClass:"q-pa-sm q-gutter-sm"},[n("q-breadcrumbs",{attrs:{align:"left"}},[n("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),e._v(" "),n("q-breadcrumbs-el",{staticClass:"q-ml-sm grey-8 fs28 page-title",attrs:{label:"Compras"}})],1)],1)]),e._v(" "),n("div",{staticClass:"col-sm-6 pull-right"},[n("div",{staticClass:"q-pa-sm q-gutter-sm"},[n("q-btn",{staticClass:"btn_nuevo",attrs:{icon:"add",label:"Nuevo"},on:{click:function(t){e.newRow()}}})],1)])])]),e._v(" "),n("div",{staticClass:"q-pa-md bg-grey-3"},[n("div",{staticClass:"row bg-white border-panel"},[n("div",{staticClass:"col q-pa-md",staticStyle:{padding:"0"}},[n("div",{staticClass:"col q-pa-md"},[n("div",{staticClass:"col-sm-12",staticStyle:{"padding-bottom":"10px"}},[n("q-search",{attrs:{color:"primary"},model:{value:e.form.filter,callback:function(t){e.$set(e.form,"filter",t)},expression:"form.filter"}})],1),e._v(" "),n("div",{staticClass:"col-sm-12 q-mt-sm",attrs:{id:"sticky-table-scroll"}},[n("q-table",{staticClass:"bg-white",attrs:{id:"sticky-table-newstyle",data:e.compras,columns:e.form.columns,selected:e.form.selected,filter:e.form.filter,color:"positive",title:"",dense:!0,pagination:e.form.pagination,loading:e.form.loading,"rows-per-page-options":e.form.rowsOptions},on:{"update:selected":function(t){e.$set(e.form,"selected",t)},"update:pagination":function(t){e.$set(e.form,"pagination",t)}},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"folio",attrs:{props:t}},[e._v(e._s(t.row.folio))]),e._v(" "),n("q-td",{key:"status",attrs:{props:t}},[n("q-chip",{attrs:{dense:"",icon:t.row.icon,color:t.row.color,"text-color":"white"}},[e._v(e._s(t.row.status))])],1),e._v(" "),n("q-td",{key:"empresa",attrs:{props:t}},[e._v(e._s(t.row.empresa))]),e._v(" "),n("q-td",{key:"proveedor",attrs:{props:t}},[e._v(e._s(t.row.proveedor))]),e._v(" "),n("q-td",{key:"fecha_compra",attrs:{props:t}},[e._v(e._s(t.row.fecha_compra))]),e._v(" "),n("q-td",{key:"acciones",attrs:{props:t}},[n("q-btn",{attrs:{small:"",flat:"",color:"blue-6",icon:"edit"},on:{click:function(n){e.editRow(t.row)}}},[n("q-tooltip",[e._v("Editar")])],1),e._v(" "),n("q-btn",{attrs:{small:"",flat:"",color:"negative",icon:"delete"},on:{click:function(n){e.deleteSingleRow(t.row.id)}}},[n("q-tooltip",[e._v("Eliminar")])],1)],1)],1)]}}])})],1)])])])])]):e._e(),e._v(" "),e.views.create?n("div",[n("div",{staticClass:"q-pa-sm panel-header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6"},[n("div",{staticClass:"q-pa-sm q-gutter-sm"},[n("q-breadcrumbs",{attrs:{align:"left"}},[n("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/dashboard"}}),e._v(" "),n("q-breadcrumbs-el",{attrs:{label:"Compras",to:""},nativeOn:{click:function(t){e.setView("grid")}}}),e._v(" "),n("q-breadcrumbs-el",{attrs:{label:"Nuevo"}})],1)],1)]),e._v(" "),n("div",{staticClass:"col-sm-6 pull-right"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 pull-right"},[n("q-btn",{staticClass:"btn_regresar",staticStyle:{"margin-right":"10px"},attrs:{icon:"fa-arrow-left"},on:{click:function(t){e.atras()}}})],1)])])]),e._v(" "),n("div",{staticClass:"q-pa-md bg-grey-3"},[n("div",{staticClass:"row bg-white border-panel"},[n("div",{staticClass:"col q-pa-md"},[n("div",{staticClass:"row q-col-gutter-xs"},[n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"dialpad","icon-color":"dark",error:e.$v.form.fields.folio.$error,"error-label":"Escriba el folio"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Folio",maxlength:"100"},model:{value:e.form.fields.folio,callback:function(t){e.$set(e.form.fields,"folio",t)},expression:"form.fields.folio"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"date_range","icon-color":"dark",error:e.$v.form.fields.fecha.$error,"error-label":"Seleccione una fecha"}},[n("q-datetime",{attrs:{type:"date",inverted:"",color:"dark","float-label":"Fecha",align:"center"},model:{value:e.form.fields.fecha,callback:function(t){e.$set(e.form.fields,"fecha",t)},expression:"form.fields.fecha"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-4"},[n("q-field",{attrs:{icon:"person","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Proveedor",options:e.proveedoresOptions,filter:""},model:{value:e.form.fields.proveedor_id,callback:function(t){e.$set(e.form.fields,"proveedor_id",t)},expression:"form.fields.proveedor_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-2"},[n("q-field",{attrs:{icon:"fas fa-info","icon-color":"dark"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Status",maxlength:"50"},model:{value:e.form.fields.status,callback:function(t){e.$set(e.form.fields,"status",t)},expression:"form.fields.status"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"work","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Presupuesto",options:e.proyectoOptions,filter:""},model:{value:e.form.fields.project_id,callback:function(t){e.$set(e.form.fields,"project_id",t)},expression:"form.fields.project_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"business","icon-color":"dark",error:e.$v.form.fields.empresa_id.$error,"error-label":"Seleccione una empresa"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Empresa",options:e.empresasOptions,filter:""},on:{input:function(t){e.cargaDireccionesSucursales()}},model:{value:e.form.fields.empresa_id,callback:function(t){e.$set(e.form.fields,"empresa_id",t)},expression:"form.fields.empresa_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"fas fa-dollar-sign","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Condiciones de pago"},model:{value:e.form.fields.condiciones_pago,callback:function(t){e.$set(e.form.fields,"condiciones_pago",t)},expression:"form.fields.condiciones_pago"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"local_shipping","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Condiciones de entrega"},model:{value:e.form.fields.condiciones_entrega,callback:function(t){e.$set(e.form.fields,"condiciones_entrega",t)},expression:"form.fields.condiciones_entrega"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-car","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Transporte"},model:{value:e.form.fields.transporte,callback:function(t){e.$set(e.form.fields,"transporte",t)},expression:"form.fields.transporte"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Entrega",options:e.entregaOptions,filter:""},on:{input:function(t){e.cargaDireccionesSucursales()}},model:{value:e.form.fields.entrega,callback:function(t){e.$set(e.form.fields,"entrega",t)},expression:"form.fields.entrega"}})],1)],1),e._v(" "),"EMPRESA"===e.form.fields.entrega?n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"store","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","stack-label":"Dirección fiscal",options:e.direccionesOptions,filter:""},model:{value:e.form.fields.direccion_id,callback:function(t){e.$set(e.form.fields,"direccion_id",t)},expression:"form.fields.direccion_id"}})],1)],1):e._e(),e._v(" "),"SUCURSAL"===e.form.fields.entrega?n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"store","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","stack-label":"Sucursal",options:e.sucursalesOptions,filter:""},model:{value:e.form.fields.sucursal_id,callback:function(t){e.$set(e.form.fields,"sucursal_id",t)},expression:"form.fields.sucursal_id"}})],1)],1):e._e(),e._v(" "),"OTRO"===e.form.fields.entrega?n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"store","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Especifique la dirección de entrega"},model:{value:e.form.fields.direccion_entrega,callback:function(t){e.$set(e.form.fields,"direccion_entrega",t)},expression:"form.fields.direccion_entrega"}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"col-sm-12"},[n("q-field",{attrs:{icon:"local_library","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"textarea",inverted:"",color:"dark","float-label":"Observaciones"},model:{value:e.form.fields.observaciones,callback:function(t){e.$set(e.form.fields,"observaciones",t)},expression:"form.fields.observaciones"}})],1)],1)]),e._v(" "),n("div",{staticClass:"row q-mt-lg"},[n("div",{staticClass:"col-sm-2 offset-sm-10 pull-right"},[n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.save()}}},[e._v("Guardar")])],1)])])])])]):e._e(),e._v(" "),e.views.update?n("div",[n("div",{staticClass:"q-pa-sm panel-header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6"},[n("div",{staticClass:"q-pa-sm q-gutter-sm"},[n("q-breadcrumbs",{attrs:{align:"left"}},[n("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/dashboard"}}),e._v(" "),n("q-breadcrumbs-el",{attrs:{label:"Compras",to:""},nativeOn:{click:function(t){e.setView("grid")}}}),e._v(" "),n("q-breadcrumbs-el",{attrs:{label:e.form.fields.folio}})],1)],1)]),e._v(" "),n("div",{staticClass:"col-sm-6 pull-right"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 pull-right"},[n("q-btn",{staticClass:"btn_regresar",staticStyle:{"margin-right":"10px"},attrs:{icon:"fa-arrow-left"},on:{click:function(t){e.atras()}}}),e._v(" "),"COMPRA"===e.form.fields.status?n("q-btn",{attrs:{color:"red","icon-right":"fas fa-file-pdf"},on:{click:function(t){e.exportPDF()}}},[e._v("GENERAR PDF")]):e._e()],1)])])]),e._v(" "),n("div",{staticClass:"q-pa-md bg-grey-3"},[n("div",{staticClass:"row bg-white border-panel"},[n("div",{staticClass:"col q-pa-md"},[n("div",{staticClass:"row q-col-gutter-xs"},[n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"dialpad","icon-color":"dark",error:e.$v.form.fields.folio.$error,"error-label":"Escriba el folio"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Folio",maxlength:"100"},model:{value:e.form.fields.folio,callback:function(t){e.$set(e.form.fields,"folio",t)},expression:"form.fields.folio"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"date_range","icon-color":"dark",error:e.$v.form.fields.fecha.$error,"error-label":"Seleccione una fecha"}},[n("q-datetime",{attrs:{type:"date",inverted:"",color:"dark","float-label":"Fecha",align:"center"},model:{value:e.form.fields.fecha,callback:function(t){e.$set(e.form.fields,"fecha",t)},expression:"form.fields.fecha"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-4"},[n("q-field",{attrs:{icon:"person","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Proveedor",options:e.proveedoresOptions,filter:""},model:{value:e.form.fields.proveedor_id,callback:function(t){e.$set(e.form.fields,"proveedor_id",t)},expression:"form.fields.proveedor_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-2"},[n("q-field",{attrs:{icon:"fas fa-info","icon-color":"dark"}},[n("q-input",{attrs:{readonly:"","upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Status",maxlength:"50"},model:{value:e.form.fields.status,callback:function(t){e.$set(e.form.fields,"status",t)},expression:"form.fields.status"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"work","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Presupuesto",options:e.proyectoOptions,filter:""},model:{value:e.form.fields.project_id,callback:function(t){e.$set(e.form.fields,"project_id",t)},expression:"form.fields.project_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"business","icon-color":"dark",error:e.$v.form.fields.empresa_id.$error,"error-label":"Seleccione una empresa"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Empresa",options:e.empresasOptions,filter:""},model:{value:e.form.fields.empresa_id,callback:function(t){e.$set(e.form.fields,"empresa_id",t)},expression:"form.fields.empresa_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"fas fa-dollar-sign","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Condiciones de pago"},model:{value:e.form.fields.condiciones_pago,callback:function(t){e.$set(e.form.fields,"condiciones_pago",t)},expression:"form.fields.condiciones_pago"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"local_shipping","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Condiciones de entrega"},model:{value:e.form.fields.condiciones_entrega,callback:function(t){e.$set(e.form.fields,"condiciones_entrega",t)},expression:"form.fields.condiciones_entrega"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-car","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Transporte"},model:{value:e.form.fields.transporte,callback:function(t){e.$set(e.form.fields,"transporte",t)},expression:"form.fields.transporte"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Entrega",options:e.entregaOptions,filter:""},on:{input:function(t){e.cargaDireccionesSucursales()}},model:{value:e.form.fields.entrega,callback:function(t){e.$set(e.form.fields,"entrega",t)},expression:"form.fields.entrega"}})],1)],1),e._v(" "),"EMPRESA"===e.form.fields.entrega?n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"store","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","stack-label":"Dirección fiscal",options:e.direccionesOptions,filter:""},model:{value:e.form.fields.direccion_id,callback:function(t){e.$set(e.form.fields,"direccion_id",t)},expression:"form.fields.direccion_id"}})],1)],1):e._e(),e._v(" "),"SUCURSAL"===e.form.fields.entrega?n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"store","icon-color":"dark"}},[n("q-select",{attrs:{inverted:"",color:"dark","stack-label":"Sucursal",options:e.sucursalesOptions,filter:""},model:{value:e.form.fields.sucursal_id,callback:function(t){e.$set(e.form.fields,"sucursal_id",t)},expression:"form.fields.sucursal_id"}})],1)],1):e._e(),e._v(" "),"OTRO"===e.form.fields.entrega?n("div",{staticClass:"col-sm-6"},[n("q-field",{attrs:{icon:"store","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Especifique la dirección de entrega"},model:{value:e.form.fields.direccion_entrega,callback:function(t){e.$set(e.form.fields,"direccion_entrega",t)},expression:"form.fields.direccion_entrega"}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"col-sm-12"},[n("q-field",{attrs:{icon:"local_library","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"textarea",inverted:"",color:"dark","float-label":"Observaciones"},model:{value:e.form.fields.observaciones,callback:function(t){e.$set(e.form.fields,"observaciones",t)},expression:"form.fields.observaciones"}})],1)],1)]),e._v(" "),n("div",{staticClass:"row q-mt-lg"},[n("div",{staticClass:"col-sm-12 pull-right"},[n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.update()}}},[e._v("Guardar")]),e._v(" "),"NUEVO"===e.form.fields.status&&e.form_detalles.data.length>0?n("q-btn",{staticClass:"btn_solicitar",attrs:{"icon-right":"check",loading:e.loadingButton},on:{click:function(t){e.solicitar()}}},[e._v("Solicitar")]):e._e(),e._v(" "),"SOLICITADO"===e.form.fields.status?n("q-btn",{attrs:{color:"lime-10","icon-right":"check",loading:e.loadingButton},on:{click:function(t){e.aprobar()}}},[e._v("Aprobar")]):e._e(),e._v(" "),"ORDEN DE COMPRA"===e.form.fields.status?n("q-btn",{attrs:{color:"teal-10","icon-right":"check",loading:e.loadingButton},on:{click:function(t){e.comprar()}}},[e._v("COMPRAR")]):e._e(),e._v(" "),"COMPRA"!==e.form.fields.status&&"NUEVO"!==e.form.fields.status?n("q-btn",{attrs:{color:"orange-10","icon-right":"clear",loading:e.loadingButton},on:{click:function(t){e.rechazar()}}},[e._v("RECHAZAR")]):e._e(),e._v(" "),"COMPRA"===e.form.fields.status&&e.form.fields.project_id>0?n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"fas fa-dollar-sign",loading:e.loadingButton},on:{click:function(t){e.crear_solicitudes(e.form.fields.project_id)}}},[e._v("GENERAR SOLICITUD")]):e._e()],1)]),e._v(" "),n("q-tabs",{staticClass:"shadow-1",staticStyle:{"margin-top":"20px"},attrs:{inverted:"",animated:"",swipeable:"",color:"teal",align:"justify"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab",{attrs:{slot:"title",name:"detalles",icon:"fas fa-box",label:"DETALLES"},slot:"title"}),e._v(" "),n("q-tab",{attrs:{slot:"title",disable:"APROBADO"!==e.form.fields.status&&"ORDEN DE COMPRA"!==e.form.fields.status&&"COMPRA"!==e.form.fields.status,name:"recepciones",icon:"book",label:"RECEPCIONES"},slot:"title"}),e._v(" "),n("q-tab-pane",{attrs:{name:"detalles"}},[n("div",{staticClass:"row q-col-gutter-xs"},["NUEVO"===e.form.fields.status?n("div",{staticClass:"row q-mt-lg subtitulos"},[e._v("\n                Detalles de la compra\n              ")]):e._e()]),e._v(" "),"NUEVO"===e.form.fields.status||!0===this.form_detalles.editar?n("div",{staticClass:"row q-col-gutter-xs",staticStyle:{"margin-top":"10px"}},["NUEVO"===e.form.fields.status?n("div",{staticClass:"col-sm-12 pull-right",staticStyle:{"padding-bottom":"15px"}},[n("q-btn",{attrs:{"icon-right":"add",color:"green",loading:e.loadingButton},on:{click:function(t){e.modalProducto(!0)}}},[e._v("Nuevo producto")]),e._v(" "),n("q-btn",{attrs:{color:"green","icon-right":"fas fa-file-excel"},on:{click:function(t){e.exportCSV()}}},[e._v("\n                  Descargar plantilla\n                ")]),e._v(" "),n("input",{ref:"fileInputCSV",staticStyle:{display:"none"},attrs:{inverted:"",color:"dark","stack-label":"Archivo csv",type:"file",name:"",value:"",accept:".csv"},on:{change:function(t){e.cargarCSV()}}}),e._v(" "),n("q-btn",{attrs:{color:"tertiary",loading:e.loadingButton},on:{click:function(t){e.$refs.fileInputCSV.click()}}},[n("i",{staticClass:"fa fa-upload",attrs:{"aria-hidden":"true"}}),e._v(" Subir CSV\n                ")]),e._v(" "),n("q-btn",{attrs:{color:"red-10","icon-right":"delete"},on:{click:function(t){e.deleteAll()}}},[e._v("\n                  Eliminar\n                ")])],1):e._e(),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark",error:e.$v.form_detalles.fields.producto_id.$error,"error-label":"Seleccione un producto"}},[n("q-select",{attrs:{inverted:"",color:"dark","float-label":"Producto",options:e.productosOptions,filter:"",readonly:"NUEVO"!==e.form.fields.status},on:{input:function(t){e.getPresentacion()}},model:{value:e.form_detalles.fields.producto_id,callback:function(t){e.$set(e.form_detalles.fields,"producto_id",t)},expression:"form_detalles.fields.producto_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-box","icon-color":"dark"}},[n("q-select",{attrs:{readonly:"",inverted:"",color:"dark","float-label":"Unidad",options:e.presentacionesOptions,filter:""},model:{value:e.form_detalles.fields.presentacion_id,callback:function(t){e.$set(e.form_detalles.fields,"presentacion_id",t)},expression:"form_detalles.fields.presentacion_id"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"style","icon-color":"dark",error:e.$v.form_detalles.fields.cantidad.$error,"error-label":"Ingrese una cantidad"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Cantidad",maxlength:"50",readonly:"NUEVO"!==e.form.fields.status},on:{keyup:function(t){e.isNumber(t,"cantidad")}},model:{value:e.form_detalles.fields.cantidad,callback:function(t){e.$set(e.form_detalles.fields,"cantidad",t)},expression:"form_detalles.fields.cantidad"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-3"},[n("q-field",{attrs:{icon:"fas fa-dollar-sign","icon-color":"dark",error:e.$v.form_detalles.fields.costo.$error,"error-label":"Ingrese un costo"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Costo",maxlength:"50",suffix:"MXN",readonly:"NUEVO"!==e.form.fields.status},on:{keyup:function(t){e.isNumber(t,"costo")}},model:{value:e.form_detalles.fields.costo,callback:function(t){e.$set(e.form_detalles.fields,"costo",t)},expression:"form_detalles.fields.costo"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-9"},[n("q-field",{attrs:{icon:"label","icon-color":"dark"}},[n("q-input",{attrs:{"upper-case":"",type:"text",inverted:"",color:"dark","float-label":"Descripción (opcional)"},model:{value:e.form_detalles.fields.descripcion,callback:function(t){e.$set(e.form_detalles.fields,"descripcion",t)},expression:"form_detalles.fields.descripcion"}})],1)],1),e._v(" "),n("div",{staticClass:"col-sm-12 pull-right"},[!1===this.form_detalles.editar&&"NUEVO"===this.form.fields.status?n("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"add",loading:e.loadingButton},on:{click:function(t){e.saveMovimientosDetalles()}}},[e._v("Agregar")]):e._e(),e._v(" "),!0===this.form_detalles.editar&&"COMPRA"!==this.form.fields.status?n("q-btn",{staticClass:"btn_actualizar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.updateMovimientosDetalles()}}},[e._v("Actualizar")]):e._e()],1)]):e._e(),e._v(" "),n("div",{staticClass:"row q-mt-sm",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"col-sm-12"},[n("q-search",{attrs:{color:"primary"},model:{value:e.form_detalles.filter,callback:function(t){e.$set(e.form_detalles,"filter",t)},expression:"form_detalles.filter"}})],1),e._v(" "),n("div",{staticClass:"col-sm-12 q-mt-sm",attrs:{id:"sticky-table-scroll-corto"}},[n("q-table",{attrs:{id:"sticky-table-newstyle",data:e.form_detalles.data,columns:e.form_detalles.columns,selected:e.form_detalles.selected,filter:e.form_detalles.filter,color:"positive",title:"",dense:!0,pagination:e.form_detalles.pagination,loading:e.form_detalles.loading,"rows-per-page-options":e.form_detalles.rowsOptions},on:{"update:selected":function(t){e.$set(e.form_detalles,"selected",t)},"update:pagination":function(t){e.$set(e.form_detalles,"pagination",t)}},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"producto",attrs:{props:t}},[e._v(e._s(t.row.producto))]),e._v(" "),n("q-td",{key:"cantidad",attrs:{props:t}},[e._v(e._s(t.row.cantidad))]),e._v(" "),n("q-td",{key:"costo",attrs:{props:t}},[e._v("$"+e._s(t.row.costo))]),e._v(" "),n("q-td",{key:"importe",attrs:{props:t}},[e._v("$"+e._s(t.row.importe))]),e._v(" "),n("q-td",{key:"total_recibido",attrs:{props:t}},[e._v(e._s(t.row.total_recibido))]),e._v(" "),n("q-td",{key:"descripcion",attrs:{props:t}},[e._v(e._s(t.row.descripcion))]),e._v(" "),n("q-td",{key:"acciones",attrs:{props:t}},["COMPRA"!==e.form.fields.status?n("q-btn",{attrs:{small:"",flat:"",color:"blue-6",icon:"edit"},on:{click:function(n){e.editRowDetalle(t.row)}}},[n("q-tooltip",[e._v("Editar")])],1):e._e(),e._v(" "),"NUEVO"===e.form.fields.status?n("q-btn",{attrs:{small:"",flat:"",color:"negative",icon:"delete"},on:{click:function(n){e.deleteSingleRowDetalle(t.row.id)}}},[n("q-tooltip",[e._v("Eliminar")])],1):e._e(),e._v(" "),"NUEVO"!==e.form.fields.status?n("q-btn",{attrs:{small:"",flat:"",color:"cyan",icon:"fas fa-check"}},[n("q-tooltip",[e._v(e._s(e.form.fields.status))])],1):e._e()],1)],1)]}}])}),e._v(" "),n("q-inner-loading",{attrs:{visible:e.form_detalles.loading}},[n("q-spinner-dots",{attrs:{size:"64px",color:"primary"}})],1)],1)])]),e._v(" "),n("q-tab-pane",{attrs:{name:"recepciones"}},[n("recepciones",{attrs:{compra_id:e.form.fields.id}})],1)],1)],1)])]),e._v(" "),n("products",{attrs:{show:e.modal_producto},on:{closeModal:function(t){e.modalProducto(t)}}})],1):e._e()])},U=[];M._withStripped=!0;var R=!1;var D=function(e){R||n("n68+")},B=Object(_.a)(S,M,U,!1,D,"data-v-2aa8a410",null);B.options.__file="src/pages/cmp/Compras.vue";t.default=B.exports},aYrh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"minValue",min:e},function(t){return!(0,o.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+e})}},"bXE/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.withParams)({type:"and"},function(){for(var e=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.length>0&&t.reduce(function(t,n){return t&&n.apply(e,o)},!0)})}},eqrJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("URu4").regex)("integer",/^-?[0-9]*$/);t.default=o},exGp:function(e,t,n){"use strict";t.__esModule=!0;var o,r=n("//Fk"),i=(o=r)&&o.__esModule?o:{default:o};t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,n){return function o(r,s){try{var a=t[r](s),l=a.value}catch(e){return void n(e)}if(!a.done)return i.default.resolve(l).then(function(e){o("next",e)},function(e){o("throw",e)});e(l)}("next")})}}},hbkP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("URu4").regex)("numeric",/^[0-9]*$/);t.default=o},jyFz:function(e,t,n){var o=function(){return this}()||Function("return this")(),r=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,i=r&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=n("SldL"),r)o.regeneratorRuntime=i;else try{delete o.regeneratorRuntime}catch(e){o.regeneratorRuntime=void 0}},lEk1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"requiredIf",prop:e},function(t,n){return!(0,o.ref)(e,this,n)||(0,o.req)(t)})}},mpcv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="web"===Object({NODE_ENV:"production",DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",API:"https://api_impact.wasp.mx/",VUE_ROUTER_MODE:"history",VUE_ROUTER_BASE:"/",APP_URL:"undefined"}).BUILD?n("tL8V").withParams:n("JVqD").withParams;t.default=o},"n68+":function(e,t,n){var o=n("UHJ3");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("rjj0").default)("4e4c69f2",o,!1,{})},"pO+f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("URu4").regex)("decimal",/^[-]?\d*(\.\d+)?$/);t.default=o},qHXR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"maxLength",max:e},function(t){return!(0,o.req)(t)||(0,o.len)(t)<=e})}},rDfH:function(e,t,n){var o=n("9kIL");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("rjj0").default)("a3ec6f62",o,!1,{})},tL8V:function(e,t,n){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withParams=void 0;var o="undefined"!=typeof window?window:void 0!==e?e:{},r=o.vuelidate?o.vuelidate.withParams:function(e,t){return"object"===n(e)&&void 0!==t?t:e(function(){})};t.withParams=r}).call(t,n("DuR2"))},xJ3U:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("URu4");t.default=function(e){return(0,o.withParams)({type:"maxValue",max:e},function(t){return!(0,o.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+e})}},yY4t:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"",""])}});