webpackJsonp([12],{"+cKO":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"alpha",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"alphaNum",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"numeric",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"between",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"email",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ipAddress",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"macAddress",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"maxLength",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minLength",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"required",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"requiredIf",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"requiredUnless",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"sameAs",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"url",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"or",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"and",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"not",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"minValue",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"maxValue",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"integer",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"decimal",{enumerable:!0,get:function(){return q.default}}),t.helpers=void 0;var a=C(r("FWhV")),o=C(r("PKmV")),i=C(r("hbkP")),n=C(r("3Ro/")),l=C(r("6rz0")),s=C(r("HSVw")),c=C(r("HM/u")),d=C(r("qHXR")),u=C(r("4ypF")),f=C(r("4oDf")),p=C(r("lEk1")),m=C(r("6+Xr")),v=C(r("L6Jx")),g=C(r("7J6f")),b=C(r("Y18q")),h=C(r("bXE/")),y=C(r("FP1U")),_=C(r("aYrh")),w=C(r("xJ3U")),O=C(r("eqrJ")),q=C(r("pO+f")),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}(r("URu4"));function C(e){return e&&e.__esModule?e:{default:e}}t.helpers=x},"3Ro/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e,t){return(0,a.withParams)({type:"between",min:e,max:t},function(r){return!(0,a.req)(r)||(!/\s/.test(r)||r instanceof Date)&&+e<=+r&&+t>=+r})}},"4oDf":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4"),o=(0,a.withParams)({type:"required"},a.req);t.default=o},"4ypF":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"minLength",min:e},function(t){return!(0,a.req)(t)||(0,a.len)(t)>=e})}},"5dBV":function(e,t,r){e.exports={default:r("quu5"),__esModule:!0}},"6+Xr":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"requiredUnless",prop:e},function(t,r){return!!(0,a.ref)(e,this,r)||(0,a.req)(t)})}},"6rz0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("URu4").regex)("email",/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/);t.default=a},"6sMz":function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n#sticky-table-scroll .q-table th[data-v-6dd328a8]{\r\n  text-align: center;\n}\r\n",""])},"7J6f":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("URu4").regex)("url",/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);t.default=a},CHlY:function(e,t,r){var a=r("kM2E"),o=r("bs6G");a(a.S+a.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},FP1U:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"not"},function(t,r){return!(0,a.req)(t)||!e.call(this,t,r)})}},FWhV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("URu4").regex)("alpha",/^[a-zA-Z]*$/);t.default=a},"HM/u":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,a.withParams)({type:"macAddress"},function(t){if(!(0,a.req)(t))return!0;if("string"!=typeof t)return!1;var r="string"==typeof e&&""!==e?t.split(e):12===t.length||16===t.length?t.match(/.{2}/g):null;return null!==r&&(6===r.length||8===r.length)&&r.every(o)})};var o=function(e){return e.toLowerCase().match(/^[0-9a-f]{2}$/)}},HSVw:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4"),o=(0,a.withParams)({type:"ipAddress"},function(e){if(!(0,a.req)(e))return!0;if("string"!=typeof e)return!1;var t=e.split(".");return 4===t.length&&t.every(i)});t.default=o;var i=function(e){if(e.length>3||0===e.length)return!1;if("0"===e[0]&&"0"!==e)return!1;if(!e.match(/^\d+$/))return!1;var t=0|+e;return t>=0&&t<=255}},L6Jx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"sameAs",eq:e},function(t,r){return t===(0,a.ref)(e,this,r)})}},PKmV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("URu4").regex)("alphaNum",/^[a-zA-Z0-9]*$/);t.default=a},SldL:function(e,t){!function(t){"use strict";var r,a=Object.prototype,o=a.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",c="object"==typeof e,d=t.regeneratorRuntime;if(d)c&&(e.exports=d);else{(d=t.regeneratorRuntime=c?e.exports:{}).wrap=_;var u="suspendedStart",f="suspendedYield",p="executing",m="completed",v={},g={};g[n]=function(){return this};var b=Object.getPrototypeOf,h=b&&b(b(S([])));h&&h!==a&&o.call(h,n)&&(g=h);var y=x.prototype=O.prototype=Object.create(g);q.prototype=y.constructor=x,x.constructor=q,x[s]=q.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===q||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(y),e},d.awrap=function(e){return{__await:e}},C(j.prototype),j.prototype[l]=function(){return this},d.AsyncIterator=j,d.async=function(e,t,r,a){var o=new j(_(e,t,r,a));return d.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},C(y),y[s]="Generator",y[n]=function(){return this},y.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var a=t.pop();if(a in e)return r.value=a,r.done=!1,r}return r.done=!0,r}},d.values=S,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(a,o){return l.type="throw",l.arg=e,t.next=a,o&&(t.method="next",t.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],l=n.completion;if("root"===n.tryLoc)return a("end");if(n.tryLoc<=this.prev){var s=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc");if(s&&c){if(this.prev<n.catchLoc)return a(n.catchLoc,!0);if(this.prev<n.finallyLoc)return a(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return a(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return a(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var o=a.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:S(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=r),v}}}function _(e,t,r,a){var o=t&&t.prototype instanceof O?t:O,i=Object.create(o.prototype),n=new A(a||[]);return i._invoke=function(e,t,r){var a=u;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===m){if("throw"===o)throw i;return D()}for(r.method=o,r.arg=i;;){var n=r.delegate;if(n){var l=E(n,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===u)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=w(e,t,r);if("normal"===s.type){if(a=r.done?m:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=m,r.method="throw",r.arg=s.arg)}}}(e,r,n),i}function w(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function O(){}function q(){}function x(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function j(e){var t;this._invoke=function(r,a){function i(){return new Promise(function(t,i){!function t(r,a,i,n){var l=w(e[r],e,a);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,n)},function(e){t("throw",e,i,n)}):Promise.resolve(c).then(function(e){s.value=e,i(s)},n)}n(l.arg)}(r,a,t,i)})}return t=t?t.then(i,i):i()}}function E(e,t){var a=e.iterator[t.method];if(a===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,E(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=w(a,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,v;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function S(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},URu4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"withParams",{enumerable:!0,get:function(){return o.default}}),t.regex=t.ref=t.len=t.req=void 0;var a,o=(a=r("mpcv"))&&a.__esModule?a:{default:a};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(e){if(Array.isArray(e))return!!e.length;if(void 0===e||null===e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===i(e)){for(var t in e)return!0;return!1}return!!String(e).length};t.req=n;t.len=function(e){return Array.isArray(e)?e.length:"object"===i(e)?Object.keys(e).length:String(e).length};t.ref=function(e,t,r){return"function"==typeof e?e.call(t,r):r[e]};t.regex=function(e,t){return(0,o.default)({type:e},function(e){return!n(e)||t.test(e)})}},Xxa5:function(e,t,r){e.exports=r("jyFz")},Y18q:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.withParams)({type:"or"},function(){for(var e=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t.length>0&&t.reduce(function(t,r){return t||r.apply(e,a)},!1)})}},aYrh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"minValue",min:e},function(t){return!(0,a.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+e})}},"bXE/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.withParams)({type:"and"},function(){for(var e=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t.length>0&&t.reduce(function(t,r){return t&&r.apply(e,a)},!0)})}},bs6G:function(e,t,r){var a=r("7KvD").parseFloat,o=r("mnVu").trim;e.exports=1/a(r("hyta")+"-0")!=-1/0?function(e){var t=o(String(e),3),r=a(t);return 0===r&&"-"==t.charAt(0)?-0:r}:a},eqrJ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("URu4").regex)("integer",/^-?[0-9]*$/);t.default=a},exGp:function(e,t,r){"use strict";t.__esModule=!0;var a,o=r("//Fk"),i=(a=o)&&a.__esModule?a:{default:a};t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,r){return function a(o,n){try{var l=t[o](n),s=l.value}catch(e){return void r(e)}if(!l.done)return i.default.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}("next")})}}},g7qI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("5dBV"),o=r.n(a),i=r("Xxa5"),n=r.n(i),l=r("exGp"),s=r.n(l),c=r("Dd8w"),d=r.n(c),u=r("NYxO"),f=r("+cKO"),p=r("mtWM"),m=r.n(p),v={name:"Historial",props:{show:{type:Boolean},oportunidad_id:{type:Number}},created:function(){this.limpiarComentario()},watch:{show:function(e,t){!0===e&&(this.limpiarComentario(),this.getHistorial())}},data:function(){return{loadingButton:!1,form:{registro_oportunidad:0,fields:{comentario:""},data:[]}}},computed:{},methods:d()({},Object(u.b)({getByOportunidad:"crm/oportunidades/getHistorial",deleteArchivo:"crm/comentarios/deleteFormato",saveComentario:"crm/comentarios/save"}),{close:function(){this.$emit("closeModal",!1)},limpiarComentario:function(){this.$v.form.$reset(),this.form.fields.comentario=""},save:function(){var e=this;if(this.$v.form.$touch(),this.$v.form.$error)this.$showMessage("Error","Por favor revise los campos.");else{var t=this.form.fields;t.oportunidad_id=this.oportunidad_id,t.etapa_id=this.etapa_id,this.saveComentario(t).then(function(t){var r=t.data;"success"===r.result&&(e.limpiarComentario(),e.getHistorial()),e.$q.notify({message:r.message.content,timeout:3e3,type:"green",textColor:"white",icon:"done",position:"top-right"})})}},getHistorial:function(){var e=this;this.form.data=[],this.getByOportunidad({id:this.oportunidad_id}).then(function(t){var r=t.data;e.form.data=r.history}).catch(function(e){console.error(e)})},verDocumento:function(e){var t="http://api.impact.beta.wasp.mx//public/assets/archivos_comentarios/"+e.id+"."+e.extension;window.open(t,"_blank")},descargarDocumento:function(e,t){var r="http://api.impact.beta.wasp.mx/comentarios/getFile/"+e+"/"+t;window.open(r,"_blank")},comentarioAccion:function(e){var t=this;this.$q.dialog({title:"Confirmar acción",message:"Se eliminará el archivo",ok:"Eliminar",cancel:"Cancelar",preventClose:!0}).then(function(){t.borrarArchivo(e)}).catch(function(){})},borrarArchivo:function(e){var t=this,r=e;this.deleteArchivo(r).then(function(e){var r=e.data;"success"===r.result?(t.$q.notify({message:r.message.content,timeout:3e3,type:"green",textColor:"white",icon:"delete",position:"top-right"}),t.getComentarios()):t.$showMessage(r.message.title,r.message.content)}).catch(function(e){console.error(e)})},isNumber:function(e,t){"@"===e.key&&console.log("arroba")},selectedComentario:function(e){this.$refs.tareaInput.value="",this.form.registro_oportunidad=e,this.$refs.tareaInput.click()},uploadComentarioFile:function(){var e=this;try{var t=this.$refs.tareaInput.files[0],r=new FormData;r.append("file",t),r.append("nombre",t.name),r.append("comentario_id",this.form.registro_oportunidad.id),null===t||void 0===t||(t.type?"jpg"===t.type.split("/")[1].toLowerCase()||"jpeg"===t.type.split("/")[1].toLowerCase()||"png"===t.type.split("/")[1].toLowerCase()||"pdf"===t.type.split("/")[1].toLowerCase()||"xml"===t.type.split("/")[1].toLowerCase()||"vnd.openxmlformats-officedocument.wordprocessingml.document"===t.type.split("/")[1].toLowerCase()?(this.$q.loading.show({message:"Subiendo archivo..."}),m.a.post("comentarios/uploadDocumento",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(r){console.log(r),"success"===r.data.result?(e.$q.notify({message:"Se ha cargado el archivo",timeout:3e3,type:"green",textColor:"white",icon:"done",position:"top-right"}),e.getHistorial()):""!==r.data.err&&(console.log(t.type.split("/")[1].toLowerCase()),e.$showMessage("Errores en archivo",r.data.err)),e.$q.loading.hide()}).catch(function(t){console.error(t),e.$q.loading.hide()})):(this.$showMessage("Error","El tipo de archivo no es el requerido para este requisito."),console.log(t.type.split("/")[1].toLowerCase())):this.$showMessage("Error","No ha seleccionado un archivo con la extensión .jpg, .jpeg, .png, .pdf, .xml"))}catch(e){console.log(e)}}}),validations:{form:{fields:{comentario:{required:f.required}}}}},g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-modal",{staticStyle:{"background-color":"rgba(0,0,0,0.7)"},attrs:{"content-css":{width:"70vw",height:"700px"}},on:{hide:function(t){e.close()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("q-modal-layout",[r("q-toolbar",{staticStyle:{"background-color":"rgba(8,85,134,1)!important"},attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"col-sm-6"},[r("q-toolbar-title",[e._v("\n          Historial\n        ")])],1),e._v(" "),r("div",{staticClass:"col-sm-6 pull-right"},[r("q-btn",{attrs:{flat:"",round:"",dense:"",color:"white",icon:"fas fa-times-circle"},on:{click:function(t){e.close()}}})],1)]),e._v(" "),r("div",{staticClass:"row q-mt-sm",staticStyle:{"margin-right":"10px"}},[r("div",{staticClass:"col-sm-12 q-mt-sm",staticStyle:{"padding-left":"10px"}},[r("div",{staticClass:"col-sm-12 q-mt-sm"},[r("div",{staticClass:"col-sm-6"},[r("q-field",{attrs:{icon:"folder","icon-color":"dark",error:e.$v.form.fields.comentario.$error,"error-label":"Por favor ingrese el comentario"}},[r("q-input",{attrs:{type:"textarea",inverted:"",color:"dark","float-label":"Comentario"},model:{value:e.form.fields.comentario,callback:function(t){e.$set(e.form.fields,"comentario",t)},expression:"form.fields.comentario"}})],1)],1),e._v(" "),r("div",{staticClass:"col-sm-6 pull-right"},[r("q-btn",{staticClass:"btn_guardar",attrs:{"icon-right":"save",loading:e.loadingButton},on:{click:function(t){e.save()}}},[e._v("Guardar")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-12 q-mt-sm"},[r("q-timeline",{attrs:{responsive:""}},e._l(e.form.data,function(t){return r("q-timeline-entry",{key:t.id,attrs:{subtitle:t.created,side:t.side,icon:t.icon,color:t.color}},[r("div",{class:"text-"+t.color+"-10"},[e._v("\n                "+e._s(t.descripcion)+"\n              ")]),e._v(" "),t.hist.length>0?r("div",e._l(t.hist,function(t){return r("q-list",{key:t.id,attrs:{bordered:"",separator:""}},[r("q-item",{attrs:{multiline:""}},[r("q-item-side",[r("q-item-tile",{attrs:{avatar:""}},[r("img",{attrs:{src:"statics/usuario_avatar.png"}})])],1),e._v(" "),r("q-item-main",[r("div",{staticClass:"col-sm-6"},[r("q-item-tile",{staticClass:"text-green-10",attrs:{label:""}},[e._v("Autor: "+e._s(t.nickname))])],1),e._v(" "),r("div",{staticClass:"col-sm-6"},[r("q-item-tile",{attrs:{sublabel:""}},[e._v("Fecha: "+e._s(t.created))])],1),e._v(" "),e._l(t.comentario,function(t){return r("q-item-tile",{key:t.id,attrs:{sublabel:""}},[e._v(e._s(t.comment))])}),e._v(" "),r("q-btn",{attrs:{small:"",flat:"",color:"green-9"},on:{click:function(r){e.selectedComentario(t)}}},[r("q-icon",{attrs:{name:"cloud_upload"}}),e._v(" \n                        "),r("q-tooltip",[e._v("Subir archivo")])],1),e._v(" "),e._l(t.archivos,function(t){return r("div",{key:t.id,staticStyle:{display:"inline"}},[r("q-btn",{attrs:{small:"",flat:"",icon:t.icon,color:t.color}},[r("q-tooltip",[e._v(e._s(t.nombre))]),e._v(" "),r("q-popover",[r("q-list",{staticClass:"scroll",staticStyle:{"min-width":"100px"},attrs:{link:"",separator:""}},["docx"!==t.extension&&"xml"!==t.extension&&"xlsx"!==t.extension&&"XLSX"!==t.extension&&"DOCX"!==t.extension?r("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(r){e.verDocumento(t)}}},[r("q-item-main",{attrs:{label:"Ver"}})],1):e._e(),e._v(" "),r("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(r){e.descargarDocumento(t.id,t.extension)}}},[r("q-item-main",{attrs:{label:"Descargar"}})],1)],1)],1)],1)],1)})],2)],1)],1)})):r("div",[e._v("\n                No hay comentarios\n              ")])])}))],1)]),e._v(" "),r("input",{ref:"tareaInput",staticStyle:{display:"none"},attrs:{id:"archivo",inverted:"",color:"dark","stack-label":"Archivo",type:"file",name:"",value:"",accept:".png, .jpg, .jpeg, .xml, .docx, .pdf, .PNG, .JPG, .JPEG, .XML, .DOCX, .PDF"},on:{change:function(t){e.uploadComentarioFile()}}})])],1)],1)},b=[];g._withStripped=!0;var h=r("XyMi"),y=Object(h.a)(v,g,b,!1,null,null,null);y.options.__file="src/components/layout/crm/Historial.vue";var _={components:{Historial:y.exports},beforeRouteEnter:function(e,t,r){r(function(e){for(var a=!1,o=e.$store.getters["user/role"],i=0;i<o.length;i++)o[i].toUpperCase()!=="admin".toUpperCase()&&o[i].toUpperCase()!=="ROOT".toUpperCase()&&o[i].toUpperCase()!=="CLIENTE".toUpperCase()&&o[i].toUpperCase()!=="LIDER".toUpperCase()&&o[i].toUpperCase()!=="DIRECTOR".toUpperCase()&&o[i].toUpperCase()!=="GERENTE DE OPERACIONES".toUpperCase()&&o[i].toUpperCase()!=="PMO".toUpperCase()&&o[i].toUpperCase()!=="FINANZAS".toUpperCase()&&o[i].toUpperCase()!=="OPERACIÓN".toUpperCase()&&o[i].toUpperCase()!=="LICITACIONES".toUpperCase()&&o[i].toUpperCase()!=="GERENTE".toUpperCase()&&o[i].toUpperCase()!=="VENTAS".toUpperCase()&&o[i].toUpperCase()!=="COORDINADOR GDP".toUpperCase()||(a=!0);a?r():r("/"===t.path?"/dashboard":t.path)})},data:function(){return{usuario:"",loadingButton:!1,selectYear:[{label:""+((new Date).getFullYear()-1),value:""+((new Date).getFullYear()-1)},{label:""+(new Date).getFullYear(),value:""+(new Date).getFullYear()},{label:""+((new Date).getFullYear()+1),value:""+((new Date).getFullYear()+1)}],year:""+(new Date).getFullYear(),reportes:[],municipiosOptions:[{label:"---Seleccione---",value:0}],statusOptions:[{label:"Todos",value:"all"},{label:"PENDIENTE",value:"PENDIENTE"},{label:"LOGRADA",value:"LOGRADA"},{label:"NO LOGRADA",value:"NO LOGRADA"}],tiposOptions:[{label:"VENTAS GOBIERNO",value:"GDP"},{label:"VENTAS DIRECTAS",value:"RETAIL"},{label:"Todos",value:"all"}],tipo_prospecto:[{label:"NUEVO",value:"NUEVO"},{label:"EXISTENTE",value:"EXISTENTE"}],ordenOptions:[{label:"FEDERAL",value:"FEDERAL"},{label:"ESTATAL",value:"ESTATAL"},{label:"MUNICIPAL",value:"MUNICIPAL"},{label:"--Seleccione--",value:"all"}],enteOptions:[{label:"EJECUTIVO",value:"EJECUTIVO"},{label:"DEPENDENCIA",value:"DEPENDENCIA"},{label:"OPD",value:"OPD"},{label:"--Seleccione--",value:"all"}],adjudicacionOptions:[{label:"LICITACIÓN",value:"LICITACIÓN"},{label:"ADJUDICACIÓN DIRECTA",value:"ADJUDICACIÓN DIRECTA"},{label:"INVITACIÓN A 3",value:"INVITACIÓN A 3"},{label:"--Seleccione--",value:"all"}],views:{grid:!0,create:!1,update:!1},modal_comentario:!1,form:{data:[],fields:{id:0,ejecutivo_id:0,sector_id:0,subsector_id:0,status:"all",tipo:"all",empresa_id:0,orden:"all",ente:"all",adjudicacion:"all",estado_id:0,municipio_id:0,aliado_id:0,valor_total:0,valor_total_final:0},columnsGDP:[{name:"nombre",label:"Oportunidad",field:"nombre",sortable:!0,type:"string",align:"left"},{name:"nombre_compania",label:"Prospecto",field:"nombre_compania",sortable:!0,type:"string",align:"left"},{name:"aliado",label:"Aliado",field:"aliado",sortable:!0,type:"string",align:"left"},{name:"sector",label:"Sector",field:"sector",sortable:!0,type:"string",align:"left"},{name:"subsector",label:"Subsector",field:"subsector",sortable:!0,type:"string",align:"left"},{name:"empresa",label:"Empresa",field:"empresa",sortable:!0,type:"string",align:"left"},{name:"orden",label:"Orden de gobierno",field:"orden",sortable:!0,type:"string",align:"left"},{name:"ente",label:"Tipo de ente",field:"ente",sortable:!0,type:"string",align:"left"},{name:"adjudicacion",label:"Adjudicación",field:"adjudicacion",sortable:!0,type:"string",align:"left"},{name:"valor",label:"Valor",field:"valor",sortable:!0,type:"string",align:"right"},{name:"valor_final",label:"Valor final",field:"valor_final",sortable:!0,type:"string",align:"right"},{name:"creada",label:"Creación",field:"creada",sortable:!0,type:"string",align:"center"},{name:"fecha_ganada",label:"Fecha ganada",field:"fecha_ganada",sortable:!0,type:"string",align:"center"},{name:"nickname",label:"Ejecutivo",field:"nickname",sortable:!0,type:"string",align:"left"},{name:"status",label:"Status",field:"status",sortable:!0,type:"string",align:"left"},{name:"estimada",label:"Avance estimado",field:"estimada",sortable:!0,type:"string",align:"left"},{name:"avance_estimado",label:"% estimado",field:"avance_estimado",sortable:!0,type:"string",align:"left"},{name:"paso",label:"Avance real",field:"paso",sortable:!0,type:"string",align:"left"},{name:"porcentaje",label:"% real",field:"porcentaje",sortable:!0,type:"string",align:"left"},{name:"dias",label:"Días CRM",field:"dias",sortable:!0,type:"string",align:"right"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],columnsRETAIL:[{name:"nombre",label:"Oportunidad",field:"nombre",sortable:!0,type:"string",align:"left"},{name:"nombre_compania",label:"Prospecto",field:"nombre_compania",sortable:!0,type:"string",align:"left"},{name:"aliado",label:"Aliado",field:"aliado",sortable:!0,type:"string",align:"left"},{name:"sector",label:"Sector",field:"sector",sortable:!0,type:"string",align:"left"},{name:"subsector",label:"Subsector",field:"subsector",sortable:!0,type:"string",align:"left"},{name:"empresa",label:"Empresa",field:"empresa",sortable:!0,type:"string",align:"left"},{name:"valor",label:"Valor",field:"valor",sortable:!0,type:"string",align:"right"},{name:"valor_final",label:"Valor final",field:"valor_final",sortable:!0,type:"string",align:"right"},{name:"creada",label:"Creación",field:"creada",sortable:!0,type:"string",align:"center"},{name:"fecha_ganada",label:"Fecha ganada",field:"fecha_ganada",sortable:!0,type:"string",align:"center"},{name:"nickname",label:"Ejecutivo",field:"nickname",sortable:!0,type:"string",align:"left"},{name:"status",label:"Status",field:"status",sortable:!0,type:"string",align:"left"},{name:"estimada",label:"Avance estimado",field:"estimada",sortable:!0,type:"string",align:"left"},{name:"avance_estimado",label:"% estimado",field:"avance_estimado",sortable:!0,type:"string",align:"left"},{name:"paso",label:"Avance real",field:"paso",sortable:!0,type:"string",align:"left"},{name:"porcentaje",label:"% real",field:"porcentaje",sortable:!0,type:"string",align:"left"},{name:"dias",label:"Días CRM",field:"dias",sortable:!0,type:"string",align:"right"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],columnsESTATAL:[{name:"nombre",label:"Oportunidad",field:"nombre",sortable:!0,type:"string",align:"left"},{name:"nombre_compania",label:"Prospecto",field:"nombre_compania",sortable:!0,type:"string",align:"left"},{name:"aliado",label:"Aliado",field:"aliado",sortable:!0,type:"string",align:"left"},{name:"sector",label:"Sector",field:"sector",sortable:!0,type:"string",align:"left"},{name:"subsector",label:"Subsector",field:"subsector",sortable:!0,type:"string",align:"left"},{name:"empresa",label:"Empresa",field:"empresa",sortable:!0,type:"string",align:"left"},{name:"orden",label:"Orden de gobierno",field:"orden",sortable:!0,type:"string",align:"left"},{name:"ente",label:"Tipo de ente",field:"ente",sortable:!0,type:"string",align:"left"},{name:"adjudicacion",label:"Adjudicación",field:"adjudicacion",sortable:!0,type:"string",align:"left"},{name:"estado",label:"Estado",field:"estado",sortable:!0,type:"string",align:"left"},{name:"valor",label:"Valor",field:"valor",sortable:!0,type:"string",align:"right"},{name:"valor_final",label:"Valor final",field:"valor_final",sortable:!0,type:"string",align:"right"},{name:"creada",label:"Creación",field:"creada",sortable:!0,type:"string",align:"center"},{name:"fecha_ganada",label:"Fecha ganada",field:"fecha_ganada",sortable:!0,type:"string",align:"center"},{name:"nickname",label:"Ejecutivo",field:"nickname",sortable:!0,type:"string",align:"left"},{name:"status",label:"Status",field:"status",sortable:!0,type:"string",align:"left"},{name:"estimada",label:"Avance estimado",field:"estimada",sortable:!0,type:"string",align:"left"},{name:"avance_estimado",label:"% estimado",field:"avance_estimado",sortable:!0,type:"string",align:"left"},{name:"paso",label:"Avance real",field:"paso",sortable:!0,type:"string",align:"left"},{name:"porcentaje",label:"% real",field:"porcentaje",sortable:!0,type:"string",align:"left"},{name:"dias",label:"Días CRM",field:"dias",sortable:!0,type:"string",align:"right"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],columnsMUNICIPAL:[{name:"nombre",label:"Oportunidad",field:"nombre",sortable:!0,type:"string",align:"left"},{name:"nombre_compania",label:"Prospecto",field:"nombre_compania",sortable:!0,type:"string",align:"left"},{name:"aliado",label:"Aliado",field:"aliado",sortable:!0,type:"string",align:"left"},{name:"sector",label:"Sector",field:"sector",sortable:!0,type:"string",align:"left"},{name:"subsector",label:"Subsector",field:"subsector",sortable:!0,type:"string",align:"left"},{name:"empresa",label:"Empresa",field:"empresa",sortable:!0,type:"string",align:"left"},{name:"orden",label:"Orden de gobierno",field:"orden",sortable:!0,type:"string",align:"left"},{name:"ente",label:"Tipo de ente",field:"ente",sortable:!0,type:"string",align:"left"},{name:"adjudicacion",label:"Adjudicación",field:"adjudicacion",sortable:!0,type:"string",align:"left"},{name:"estado",label:"Estado",field:"estado",sortable:!0,type:"string",align:"left"},{name:"municipio",label:"Municipio",field:"municipio",sortable:!0,type:"string",align:"left"},{name:"valor",label:"Valor",field:"valor",sortable:!0,type:"string",align:"right"},{name:"valor_final",label:"Valor final",field:"valor_final",sortable:!0,type:"string",align:"right"},{name:"creada",label:"Creación",field:"creada",sortable:!0,type:"string",align:"center"},{name:"fecha_ganada",label:"Fecha ganada",field:"fecha_ganada",sortable:!0,type:"string",align:"center"},{name:"nickname",label:"Ejecutivo",field:"nickname",sortable:!0,type:"string",align:"left"},{name:"status",label:"Status",field:"status",sortable:!0,type:"string",align:"left"},{name:"estimada",label:"Avance estimado",field:"estimada",sortable:!0,type:"string",align:"left"},{name:"avance_estimado",label:"% estimado",field:"avance_estimado",sortable:!0,type:"string",align:"left"},{name:"paso",label:"Avance real",field:"paso",sortable:!0,type:"string",align:"left"},{name:"porcentaje",label:"% real",field:"porcentaje",sortable:!0,type:"string",align:"left"},{name:"dias",label:"Días CRM",field:"dias",sortable:!0,type:"string",align:"right"},{name:"acciones",label:"Acciones",field:"acciones",sortable:!1,type:"string",align:"right"}],rowsOptions:[3,5,7,10,15,20,25,50],pagination:{rowsPerPage:50},selected:[],filter:"",loading:!1}}},mounted:function(){this.loadAll()},computed:d()({},Object(u.c)({}),{programasOptions:function(){var e=this.$store.getters["vnt/programa/selectOptions"];return e.splice(0,0,{label:"Todos",value:0}),e},subprogramasOptions:function(){var e=this,t=this.$store.getters["vnt/subprograma/selectOtherOptions"].filter(function(t){return t.programa_id===e.form.fields.sector_id});return t.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}),t.splice(0,0,{label:"Todos",value:0}),t},vendedoresOptions:function(){var e=this.$store.getters["sys/users/selectOptionsName"];return e.splice(0,0,{label:"Todos",value:0}),e},estadosOptions:function(){var e=this.$store.getters["vnt/estado/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e.sort(function(e,t){return e.nombre>t.nombre?1:e.nombre<t.nombre?-1:0}),e},empresasOptions:function(){var e=this.$store.getters["vnt/empresa/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e},aliadosOptions:function(){var e=this.$store.getters["com/aliados/selectOptions"];return e.splice(0,0,{label:"---Seleccione---",value:0}),e}}),methods:d()({},Object(u.b)({getProgramas:"vnt/programa/refresh",getSubprogramas:"vnt/subprograma/refresh",getVendedores:"sys/users/refresh",getEstados:"vnt/estado/refresh",getEmpresas:"vnt/empresa/refresh",getMunicipiosByEstado:"vnt/municipio/getByEstado",getAliados:"com/aliados/refresh",getUser:"user/refresh"}),{loadAll:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.loading=!0,t.next=3,e.isAdmin();case 3:return t.next=5,e.getVendedores();case 5:return t.next=7,e.getProgramas();case 7:return t.next=9,e.getSubprogramas();case 9:return t.next=11,e.getEmpresas();case 11:return t.next=13,e.getEstados();case 13:return t.next=15,e.getAliados();case 15:return t.next=17,e.cargarDatosReporte();case 17:e.form.loading=!1;case 18:case"end":return t.stop()}},t,e)}))()},isAdmin:function(){var e=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,e.getUser().then(function(t){var r=t.data;"Ventas"===r.role[0]&&(e.form.fields.ejecutivo_id=r.user.id),e.usuario=r.role[0]}).catch(function(e){console.log(e)});case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}},t,e)}))()},selectSubprograma:function(){this.form.fields.subsector_id=0},cargarDatosReporte:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.form.loading=!0,e.form.data=[],t.next=4,m.a.get("/reportes/reporte_oportunidades/"+e.form.fields.ejecutivo_id+"/"+e.form.fields.sector_id+"/"+e.form.fields.subsector_id+"/"+e.form.fields.status+"/"+e.form.fields.empresa_id+"/"+e.form.fields.tipo+"/"+e.form.fields.orden+"/"+e.form.fields.ente+"/"+e.form.fields.adjudicacion+"/"+e.form.fields.estado_id+"/"+e.form.fields.municipio_id+"/"+e.form.fields.aliado_id).then(function(t){var r=t.data;e.form.data=r.reporte,e.valor_total=r.valor,e.valor_total_final=r.valor_final}).catch(function(e){console.error(e)});case 4:e.form.loading=!1;case 5:case"end":return t.stop()}},t,e)}))()},exportCSV:function(){var e="http://api.impact.beta.wasp.mx/reportes/exportCSV_oportunidades/"+this.form.fields.ejecutivo_id+"/"+this.form.fields.sector_id+"/"+this.form.fields.subsector_id+"/"+this.form.fields.status+"/"+this.form.fields.empresa_id+"/"+this.form.fields.tipo+"/"+this.form.fields.orden+"/"+this.form.fields.ente+"/"+this.form.fields.adjudicacion+"/"+this.form.fields.estado_id+"/"+this.form.fields.municipio_id+"/"+this.form.fields.aliado_id;window.open(e,"_blank")},borrar:function(){this.form.fields.ejecutivo_id=0,this.form.fields.sector_id=0,this.form.fields.subsector_id=0,this.form.fields.status="all",this.form.fields.empresa_id=0,this.form.fields.tipo="all",this.form.fields.orden="all",this.form.fields.ente="all",this.form.fields.adjudicacion="all",this.form.fields.estado_id=0,this.form.fields.municipio_id=0,this.form.fields.aliado_id=0},currencyFormat:function(e){return o()(e).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},municipiosOportunidad:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.municipiosOptions=[],e.form.fields.municipio_id=0,t.next=4,e.getMunicipiosByEstado({estado_id:e.form.fields.estado_id}).then(function(t){var r=t.data;e.municipiosOptions.push({label:"---Seleccione---",value:0}),r.municipios.length>0&&r.municipios.forEach(function(t){e.municipiosOptions.push({label:t.nombre,value:t.id})})}).catch(function(e){console.error(e)});case 4:case"end":return t.stop()}},t,e)}))()},modalComentario:function(e,t){this.modal_comentario=e,this.form.fields.id=t}})},w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("div",{staticClass:"q-pa-sm panel-header"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-4"},[r("div",{staticClass:"q-pa-sm q-gutter-sm"},[r("q-breadcrumbs",{attrs:{align:"left"}},[r("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/dashboard"}}),e._v(" "),r("q-breadcrumbs-el",{staticClass:"page-title",attrs:{label:"Prospección"}})],1)],1)]),e._v(" "),r("div",{staticClass:"col-sm-8 pull-right"},[r("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 pull-right"},[r("q-btn",{staticStyle:{"margin-top":"5px"},attrs:{color:"green",icon:"fas fa-search",loading:e.loadingButton},on:{click:function(t){e.cargarDatosReporte()}}},[r("q-tooltip",[e._v("Buscar")])],1),e._v(" "),r("q-btn",{staticStyle:{"margin-top":"5px"},attrs:{color:"green",icon:"fas fa-file-excel"},on:{click:function(t){e.exportCSV()}}},[r("q-tooltip",[e._v("Generar CSV")])],1),e._v(" "),r("q-btn",{staticStyle:{"margin-top":"5px"},attrs:{color:"red",icon:"loop"},on:{click:function(t){e.borrar()}}},[r("q-tooltip",[e._v("Limpiar")])],1)],1)])])]),e._v(" "),r("div",{staticClass:"q-pa-md bg-grey-3"},[r("div",{staticClass:"row bg-white border-panel"},[r("div",{staticClass:"col q-pa-md"},[r("div",{staticClass:"row q-col-gutter-xs"},[r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"person","icon-color":"dark"}},["Ventas"!==this.usuario?r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Ejecutivo de ventas",options:e.vendedoresOptions,filter:""},model:{value:e.form.fields.ejecutivo_id,callback:function(t){e.$set(e.form.fields,"ejecutivo_id",t)},expression:"form.fields.ejecutivo_id"}}):r("q-select",{attrs:{readonly:"",inverted:"",color:"dark","float-label":"Ejecutivo de ventas",options:e.vendedoresOptions,filter:""},model:{value:e.form.fields.ejecutivo_id,callback:function(t){e.$set(e.form.fields,"ejecutivo_id",t)},expression:"form.fields.ejecutivo_id"}})],1)],1),e._v(" "),r("div",{staticClass:"col-sm-3",attrs:{"icon-color":"dark"}},[r("q-field",{attrs:{icon:"fas fa-building","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Sector",options:e.programasOptions,filter:""},on:{input:function(t){e.selectSubprograma()}},model:{value:e.form.fields.sector_id,callback:function(t){e.$set(e.form.fields,"sector_id",t)},expression:"form.fields.sector_id"}})],1)],1),e._v(" "),r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"fas fa-globe","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Subsector",options:e.subprogramasOptions,filter:""},model:{value:e.form.fields.subsector_id,callback:function(t){e.$set(e.form.fields,"subsector_id",t)},expression:"form.fields.subsector_id"}})],1)],1),e._v(" "),r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"fas fa-info","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Status",options:e.statusOptions,filter:""},model:{value:e.form.fields.status,callback:function(t){e.$set(e.form.fields,"status",t)},expression:"form.fields.status"}})],1)],1),e._v(" "),r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"fas fa-building","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Empresa",options:e.empresasOptions,filter:""},model:{value:e.form.fields.empresa_id,callback:function(t){e.$set(e.form.fields,"empresa_id",t)},expression:"form.fields.empresa_id"}})],1)],1),e._v(" "),r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"person","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Aliado",options:e.aliadosOptions,filter:""},model:{value:e.form.fields.aliado_id,callback:function(t){e.$set(e.form.fields,"aliado_id",t)},expression:"form.fields.aliado_id"}})],1)],1),e._v(" "),r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"label","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Tipo",options:e.tiposOptions,filter:""},model:{value:e.form.fields.tipo,callback:function(t){e.$set(e.form.fields,"tipo",t)},expression:"form.fields.tipo"}})],1)],1),e._v(" "),"GDP"===e.form.fields.tipo?r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"vpn_lock","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Orden de gobierno",options:e.ordenOptions,filter:""},model:{value:e.form.fields.orden,callback:function(t){e.$set(e.form.fields,"orden",t)},expression:"form.fields.orden"}})],1)],1):e._e(),e._v(" "),"GDP"===e.form.fields.tipo?r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"business","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Tipo de ente",options:e.enteOptions,filter:""},model:{value:e.form.fields.ente,callback:function(t){e.$set(e.form.fields,"ente",t)},expression:"form.fields.ente"}})],1)],1):e._e(),e._v(" "),"GDP"===e.form.fields.tipo?r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"layers","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Método de adjudicación",options:e.adjudicacionOptions,filter:""},model:{value:e.form.fields.adjudicacion,callback:function(t){e.$set(e.form.fields,"adjudicacion",t)},expression:"form.fields.adjudicacion"}})],1)],1):e._e(),e._v(" "),"GDP"===e.form.fields.tipo&&"FEDERAL"!==e.form.fields.orden&&"all"!==e.form.fields.orden?r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"fas fa-globe","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Estado",options:e.estadosOptions,filter:""},on:{input:function(t){e.municipiosOportunidad()}},model:{value:e.form.fields.estado_id,callback:function(t){e.$set(e.form.fields,"estado_id",t)},expression:"form.fields.estado_id"}})],1)],1):e._e(),e._v(" "),"GDP"===e.form.fields.tipo&&"MUNICIPAL"===e.form.fields.orden&&"all"!==e.form.fields.orden?r("div",{staticClass:"col-sm-3"},[r("q-field",{attrs:{icon:"fas fa-map-pin","icon-color":"dark"}},[r("q-select",{attrs:{inverted:"",color:"dark","float-label":"Municipio",options:e.municipiosOptions,filter:""},model:{value:e.form.fields.municipio_id,callback:function(t){e.$set(e.form.fields,"municipio_id",t)},expression:"form.fields.municipio_id"}})],1)],1):e._e()])])])]),e._v(" "),r("div",{staticClass:"q-px-md bg-grey-3"},[r("div",{staticClass:"row bg-white border-panel"},[r("div",{staticClass:"col q-pa-md",staticStyle:{padding:"0"}},[r("div",{staticClass:"col q-pa-md "},[r("div",{staticClass:"col-sm-12",staticStyle:{"padding-bottom":"10px"}},[r("q-search",{attrs:{color:"primary"},model:{value:e.form.filter,callback:function(t){e.$set(e.form,"filter",t)},expression:"form.filter"}})],1),e._v(" "),r("div",{staticClass:"col-sm-12 q-mt-sm",attrs:{id:"sticky-table-scroll"}},[r("q-table",{attrs:{id:"sticky-table-newstyle",data:e.form.data,columns:e.form.columnsESTATAL,selected:e.form.selected,filter:e.form.filter,color:"positive",title:"",dense:!0,pagination:e.form.pagination,loading:e.form.loading,"rows-per-page-options":e.form.rowsOptions},on:{"update:selected":function(t){e.$set(e.form,"selected",t)},"update:pagination":function(t){e.$set(e.form,"pagination",t)}},scopedSlots:e._u([{key:"body",fn:function(t){return[r("q-tr",{attrs:{props:t}},[r("q-td",{key:"nombre",attrs:{props:t}},[e._v(e._s(t.row.nombre))]),e._v(" "),r("q-td",{key:"nombre_compania",attrs:{props:t}},[e._v(e._s(t.row.nombre_compania))]),e._v(" "),r("q-td",{key:"aliado",attrs:{props:t}},[e._v(e._s(t.row.aliado))]),e._v(" "),r("q-td",{key:"sector",attrs:{props:t}},[e._v(e._s(t.row.sector))]),e._v(" "),r("q-td",{key:"subsector",attrs:{props:t}},[e._v(e._s(t.row.subsector))]),e._v(" "),r("q-td",{key:"empresa",attrs:{props:t}},[e._v(e._s(t.row.empresa))]),e._v(" "),r("q-td",{key:"orden",attrs:{props:t}},[e._v(e._s(t.row.orden))]),e._v(" "),r("q-td",{key:"ente",attrs:{props:t}},[e._v(e._s(t.row.ente))]),e._v(" "),r("q-td",{key:"adjudicacion",attrs:{props:t}},[e._v(e._s(t.row.adjudicacion))]),e._v(" "),r("q-td",{key:"estado",attrs:{props:t}},[e._v(e._s(t.row.estado))]),e._v(" "),r("q-td",{key:"municipio",attrs:{props:t}},[e._v(e._s(t.row.municipio))]),e._v(" "),r("q-td",{key:"valor",attrs:{props:t}},[e._v("$"+e._s(e.currencyFormat(t.row.valor)))]),e._v(" "),r("q-td",{key:"valor_final",attrs:{props:t}},[e._v("$"+e._s(e.currencyFormat(t.row.valor_final)))]),e._v(" "),r("q-td",{key:"creada",attrs:{props:t}},[e._v(e._s(t.row.creada))]),e._v(" "),r("q-td",{key:"fecha_ganada",attrs:{props:t}},[e._v(e._s(t.row.fecha_ganada))]),e._v(" "),r("q-td",{key:"nickname",attrs:{props:t}},[e._v(e._s(t.row.nickname))]),e._v(" "),r("q-td",{key:"status",attrs:{props:t}},[e._v(e._s(t.row.status))]),e._v(" "),r("q-td",{key:"estimada",attrs:{props:t}},[e._v(e._s(t.row.estimada))]),e._v(" "),r("q-td",{key:"avance_estimado",attrs:{props:t}},[r("span",{staticStyle:{position:"absolute","z-index":"1",right:"42%",top:"35%"}},[e._v(e._s(t.row.avance_estimado)+"%")]),e._v(" "),r("q-progress",{staticStyle:{height:"20px"},attrs:{percentage:parseInt(t.row.avance_estimado),color:"blue",stripe:"",animate:""}})],1),e._v(" "),r("q-td",{key:"paso",attrs:{props:t}},[e._v(e._s(t.row.paso))]),e._v(" "),r("q-td",{key:"porcentaje",staticStyle:{width:"8%"},attrs:{props:t}},[r("span",{staticStyle:{position:"absolute","z-index":"1",right:"42%",top:"35%"}},[e._v(e._s(t.row.porcentaje)+"%")]),e._v(" "),r("q-progress",{staticStyle:{height:"20px"},attrs:{percentage:parseInt(t.row.porcentaje),color:t.row.color,stripe:"",animate:""}})],1),e._v(" "),r("q-td",{key:"dias",attrs:{props:t}},[e._v(e._s(t.row.dias))]),e._v(" "),r("q-td",{key:"acciones",attrs:{props:t}},[r("q-btn",{attrs:{small:"",flat:"",color:"orange",icon:"fas fa fa-sticky-note"},on:{click:function(r){e.modalComentario(!0,t.row.id)}}},[r("q-tooltip",[e._v("Ver comentarios")])],1)],1)],1)]}},{key:"bottom-row",fn:function(t){return r("q-tr",{},[r("q-td",{staticStyle:{"text-align":"right"},attrs:{colspan:"15%"}},[r("strong",[e._v("Valor Total: $"+e._s(e.currencyFormat(e.valor_total))+" MXN")])]),e._v(" "),r("q-td",{staticStyle:{"text-align":"right"},attrs:{colspan:"10%"}},[r("strong",[e._v("Valor Total Final: $"+e._s(e.currencyFormat(e.valor_total_final))+" MXN")])])],1)}}])}),e._v(" "),r("q-inner-loading",{attrs:{visible:e.form.loading}},[r("q-spinner-dots",{attrs:{size:"64px",color:"primary"}})],1)],1)])])])]),e._v(" "),r("historial",{attrs:{show:e.modal_comentario,oportunidad_id:e.form.fields.id},on:{closeModal:function(t){e.modalComentario(t)}}})],1)},O=[];w._withStripped=!0;var q=!1;var x=function(e){q||r("zVlF")},C=Object(h.a)(_,w,O,!1,x,"data-v-6dd328a8",null);C.options.__file="src/pages/rpt/Oportunidades.vue";t.default=C.exports},hbkP:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("URu4").regex)("numeric",/^[0-9]*$/);t.default=a},hyta:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},jyFz:function(e,t,r){var a=function(){return this}()||Function("return this")(),o=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,i=o&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,e.exports=r("SldL"),o)a.regeneratorRuntime=i;else try{delete a.regeneratorRuntime}catch(e){a.regeneratorRuntime=void 0}},lEk1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"requiredIf",prop:e},function(t,r){return!(0,a.ref)(e,this,r)||(0,a.req)(t)})}},mnVu:function(e,t,r){var a=r("kM2E"),o=r("52gC"),i=r("S82l"),n=r("hyta"),l="["+n+"]",s=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(e,t,r){var o={},l=i(function(){return!!n[e]()||"​"!="​"[e]()}),s=o[e]=l?t(u):n[e];r&&(o[r]=s),a(a.P+a.F*l,"String",o)},u=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},mpcv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="web"===Object({NODE_ENV:"production",DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",API:"http://api.impact.beta.wasp.mx/",VUE_ROUTER_MODE:"history",VUE_ROUTER_BASE:"/",APP_URL:"undefined"}).BUILD?r("tL8V").withParams:r("JVqD").withParams;t.default=a},"pO+f":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("URu4").regex)("decimal",/^[-]?\d*(\.\d+)?$/);t.default=a},qHXR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"maxLength",max:e},function(t){return!(0,a.req)(t)||(0,a.len)(t)<=e})}},quu5:function(e,t,r){r("CHlY"),e.exports=r("FeBl").Number.parseFloat},tL8V:function(e,t,r){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withParams=void 0;var a="undefined"!=typeof window?window:void 0!==e?e:{},o=a.vuelidate?a.vuelidate.withParams:function(e,t){return"object"===r(e)&&void 0!==t?t:e(function(){})};t.withParams=o}).call(t,r("DuR2"))},xJ3U:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("URu4");t.default=function(e){return(0,a.withParams)({type:"maxValue",max:e},function(t){return!(0,a.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+e})}},zVlF:function(e,t,r){var a=r("6sMz");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("rjj0").default)("d3f1748e",a,!1,{})}});